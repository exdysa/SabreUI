(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4143:function(e,t,a){Promise.resolve().then(a.bind(a,4833))},4833:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return ef}});var s=a(7437),l=a(2265),n=a(9655),r=a(865),i=a(1353),o=a(5087),d=a(5849),c=a(1657);let x=e=>{let{category:t,items:a,setActiveItem:r,onAddNode:i,expandedItems:o,setExpandedItems:u}=e,m=(0,l.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},[]),h=e=>{r(a.widgets[e])},p=()=>{r(null)};return(0,s.jsxs)(n.qu,{children:[(0,s.jsx)(n.xx,{className:"text-xs text-left py-0 my-0 px-1 w-full",children:t}),(0,s.jsx)(n.dp,{className:"p-2",children:(0,s.jsxs)("div",{className:"flex flex-col items-baseline justify-start",children:[Object.entries(a.subcategories).map(e=>{let[t,a]=e;return(0,s.jsx)(x,{category:t,items:a,setActiveItem:r,onAddNode:i,expandedItems:o,setExpandedItems:u},t)}),Object.values(a.subcategories).length>0&&a.widgets.length>0&&(0,s.jsx)(n.uP,{}),a.widgets.map((e,t)=>(0,s.jsx)("button",{className:(0,c.cn)("cursor-click shadow-sm -mt-px w-full text-left","relative z-0 hover:z-50 px-1 py-0.7 rounded border border-neutral-600 transition duration-200 hover:border-white bg-background text-neutral-200 text-xs"),onClick:t=>{t.preventDefault(),i({widget:e})},draggable:!0,onDragStart:t=>m(t,e),onMouseEnter:()=>h(t),onMouseLeave:p,children:(0,d.Z)(e.name)},e.name))]})})]})};var u=l.memo(x),m=a(2177),h=l.memo(e=>{let{setActiveItem:t}=e,{widgets:a,onAddNode:d}=(0,r.q)((0,o.N)(e=>({widgets:e.widgets,onAddNode:e.onAddNode}))),[c,x]=(0,l.useState)({}),[h,p]=(0,l.useState)(""),[f,j]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e={},t=(t,a)=>{let s=e;t.forEach((e,l)=>{s[e]||(s[e]={widgets:[],subcategories:{}}),l===t.length-1&&s[e].widgets.push(a),s=s[e].subcategories})},s=Object.values(a);for(let e of(h&&(s=s.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()))),s))t(e.category.split("/"),e);x(e)},[a,h]);let g=(0,l.useCallback)(e=>{p(e.target.value)},[]);return(0,s.jsxs)("div",{className:"flex flex-col",children:[(0,s.jsx)("div",{className:"flex px-2",children:(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{name:"search",type:"text",className:"px-9 flex h-6 w-full rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search...",onChange:g,onKeyDown:e=>e.stopPropagation()}),(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2   flex items-center   pointer-events-none",children:(0,s.jsx)(m._Ve,{className:"w-4 h-4 text-gray-400"})})]})}),(0,s.jsx)(n.uP,{}),(0,s.jsx)("div",{className:"flex flex-col",children:Object.entries(c).map((e,a)=>{let[l,n]=e;return(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.01*a,duration:.2},children:(0,s.jsx)(u,{category:l,items:n,setActiveItem:t,onAddNode:d,expandedItems:f,setExpandedItems:j},l)},l)})})]})}),p=a(7014),f=a(8325);let j=e=>{let{isRequired:t,position:a}=e;return(0,s.jsx)("div",{className:"mt-1.5 react-flow__handle ".concat(t?"bg-primary":"bg-border"," ").concat("left"===a?"mr-2":"ml-2"),style:{width:"12px",height:"12px",position:"absolute",[a]:-3}})};var g=l.memo(e=>{let{data:t}=e,{outputs:a,params:n,inputs:r}=(0,l.useMemo)(()=>{let e=t.output.map(e=>({name:e,type:e})),a=[],s=[];return Object.entries(t.input.required).forEach(e=>{let[t,l]=e;p.lj.isParameterOrList(l)?a.push({name:t,type:l[0],input:l}):s.push({name:t,type:l[0]})}),{outputs:e,params:a,inputs:s}},[t]);return(0,s.jsx)(i.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:20,duration:.15},className:"w-[350px]",children:(0,s.jsxs)(f.Z,{title:t.name,active:!1,preview:!0,children:[(0,s.jsxs)("div",{className:"flex w-full items-stretch justify-between space-x-6",children:[(0,s.jsx)("div",{className:"flex-1",children:r.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center",children:[(0,s.jsx)(j,{position:"left",isRequired:1}),(0,s.jsx)("span",{className:"text-sm",children:(0,d.Z)(e.name)})]},t))}),(0,s.jsx)("div",{className:"flex-1 text-right",children:a.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center justify-end",children:[(0,s.jsx)("span",{className:"text-sm",children:(0,d.Z)(e.name)}),(0,s.jsx)(j,{position:"right",isRequired:1})]},t))})]}),(0,s.jsx)("div",{className:"mt-4",children:n.map((e,t)=>(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)("span",{className:"text-sm",children:(0,d.Z)(e.name)})},t))})]})})});function b(e){let{children:t}=e,[a,r]=(0,l.useState)(null),[i,o]=(0,l.useState)({x:"right",y:"bottom"});return(0,l.useEffect)(()=>{let e=e=>{e.clientX>2*window.innerWidth/3?o({x:"left",y:"top"}):o({x:"right",y:"bottom"})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n.xV,{children:[(0,s.jsx)(n.W4,{children:t}),(0,s.jsx)(n.h_,{className:"overflow-scroll",children:(0,s.jsx)(h,{setActiveItem:r})})]}),null!==a&&(0,s.jsx)("div",{className:"fixed z-[60] ".concat(i.x,"-0 ").concat(i.y,"-0 bg-muted/50 p-8 rounded-lg border backdrop-blur-sm"),children:(0,s.jsx)(g,{data:a})})]})}var v=a(2936),w=a(7742),N=a(2235);let y=v.fC,k=v.xz;v.x8;let C=v.h_,S=l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(v.aV,{className:(0,c.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...l,ref:t})});S.displayName=v.aV.displayName;let E=(0,w.j)("fixed z-50 gap-4 bg-background p-6 shadow-xl transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-200 data-[state=open]:duration-200",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),D=l.forwardRef((e,t)=>{let{side:a="right",className:l,children:n,...r}=e;return(0,s.jsxs)(C,{children:[(0,s.jsx)(S,{}),(0,s.jsxs)(v.VY,{ref:t,className:(0,c.cn)(E({side:a}),l),...r,children:[n,(0,s.jsxs)(v.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,s.jsx)(N.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});D.displayName=v.VY.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(v.Dx,{ref:t,className:(0,c.cn)("text-lg font-semibold text-foreground",a),...l})}).displayName=v.Dx.displayName,l.forwardRef((e,t)=>{let{className:a,...l}=e;return(0,s.jsx)(v.dk,{ref:t,className:(0,c.cn)("text-sm text-muted-foreground",a),...l})}).displayName=v.dk.displayName;var z=a(5754),O=a(8152);let L=O.zt,A=O.fC,Z=O.xz,K=l.forwardRef((e,t)=>{let{className:a,sideOffset:l=4,...n}=e;return(0,s.jsx)(O.VY,{ref:t,sideOffset:l,className:(0,c.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});K.displayName=O.VY.displayName;var T=a(9326),q=a(5179),F=a(1014);let I=l.forwardRef((e,t)=>{let{className:a,orientation:l="horizontal",decorative:n=!0,...r}=e;return(0,s.jsx)(F.f,{ref:t,decorative:n,orientation:l,className:(0,c.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",a),...r})});I.displayName=F.f.displayName;var R=l.memo(e=>{let{item:t,index:a,handleRename:n,handleUpdate:r,handleDelete:i,handleLoad:o}=e,[d,c]=(0,l.useState)(!1),x=(0,l.useCallback)(e=>{c(!1);let a=e.target.value;a&&n(t.id,a)},[n,t.id]),u=(0,l.useCallback)(()=>{o(t.graph,t.title)},[o,t.graph,t.title]),h=(0,l.useCallback)(()=>{c(!d)},[d]),f=(0,l.useCallback)(()=>{r(t.id,t.title)},[r,t.id,t.title]),j=(0,l.useCallback)(()=>{(0,p.Cq)(t.graph,t.title)},[t.graph,t.title]),g=(0,l.useCallback)(()=>{i(t.id,t.title)},[i,t.id,t.title]),b=(0,l.useCallback)(()=>d?(0,s.jsx)(q.I,{defaultValue:t.title,onBlur:x,onKeyDown:e=>["Enter","Escape"].includes(e.key)&&e.target.blur()}):(0,s.jsx)("a",{className:"flex",title:"Load",onClick:u,children:t.title}),[d,t.title,a,x,u]);return(0,s.jsx)(L,{delayDuration:0,children:(0,s.jsx)("ul",{className:"list-none p-0 m-0",children:(0,s.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,s.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("div",{children:(0,s.jsx)("a",{title:"Load",onClick:u,className:"flex items-center space-x-2 my-4",children:(0,s.jsx)("span",{children:b()})})}),(0,s.jsxs)("div",{className:"flex justify-end items-center",children:[(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(z.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:h,children:(0,s.jsx)(m.SQj,{})})}),(0,s.jsx)(K,{children:"Rename workflow"})]}),(0,s.jsx)(I,{orientation:"vertical",decorative:!0}),(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(z.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:f,children:(0,s.jsx)(m.oqE,{})})}),(0,s.jsx)(K,{children:"Overwrite with current"})]}),(0,s.jsx)(I,{orientation:"vertical",decorative:!0}),(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(z.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:j,children:(0,s.jsx)(m._8t,{})})}),(0,s.jsx)(K,{children:"Download to disk"})]}),(0,s.jsx)(I,{orientation:"vertical",decorative:!0}),(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(z.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:g,children:(0,s.jsx)(m.ypG,{})})}),(0,s.jsx)(K,{children:"Delete workflow"})]})]})]}),(0,s.jsx)("div",{className:"text-sm text-gray-600",children:(0,s.jsxs)("div",{className:"flex space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.S7f,{}),(0,s.jsx)("span",{children:Object.keys(t.graph.data).length})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.qDj,{}),(0,s.jsx)("span",{children:t.graph.connections.length})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(m.T39,{}),(0,s.jsx)("span",{children:(()=>{let e=new Date(t.time);return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)})()})]})]})})]})},t.id)})})}),G=a(6288),W=a(3428),V=a(9580),M=a(489);function P(e){let{onUpload:t}=e,[a,n]=(0,l.useState)(null),[r,i]=(0,l.useState)(!1),[o,d]=(0,l.useState)(""),{dragOver:x,setDragOver:u,onDragOver:h,onDragLeave:p}=function(){let[e,t]=(0,l.useState)(!1),[a,s]=(0,l.useState)("");return{dragOver:e,setDragOver:t,onDragOver:e=>{e.preventDefault(),t(!0)},onDragLeave:()=>t(!1),fileDropError:a,setFileDropError:s}}(),f=()=>{a&&(i(!0),setTimeout(()=>{i(!1)},Math.max(1e3,Math.min(a.size/750,4e3))))};return(0,l.useEffect)(()=>{a&&!r&&f()},[a]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"border-b",children:[(0,s.jsx)("label",{htmlFor:"file",onDragOver:h,onDragLeave:p,onDrop:e=>{e.preventDefault(),u(!1);let a=e.dataTransfer.files[0];return a?"application/json"!==a.type?d("Invalid file type! Only JSON files are accepted."):a.size>102400?d("File size exceeds the maximum limit of 100KB."):void(n(a),d(""),t(a)):d("No file selected.")},className:(0,c.cn)("px-4 py-2 border-[1.5px] border-dashed dark:border-neutral-700 m-4 rounded-lg flex flex-col justify-start items-center hover:cursor-pointer",x&&"border-blue-600 bg-blue-50"),children:(0,s.jsxs)("div",{className:"flex flex-col p-4 justify-start items-center text-center",children:[(0,s.jsx)(m.rG2,{className:(0,c.cn)("h-5 w-5 text-neutral-600 my-4",x&&"text-blue-500")}),(0,s.jsx)("p",{className:"font-semibold",children:"Load a workspace or drag & drop it here"}),(0,s.jsx)("p",{className:"text-neutral-500 text-sm",children:"Only JSON files. Up to 100 KB."})]})}),(0,s.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",onChange:e=>{let a=e.target.files?e.target.files[0]:null;return a?"application/json"!==a.type?d("Invalid file type! Only JSON files are accepted."):a.size>102400?d("File size exceeds the maximum limit of 100KB."):void(n(a),d(""),t(a)):d("No file selected.")},accept:"application/json"})]}),a&&(0,s.jsx)("div",{className:"w-full px-4 py-2 gap-2 flex flex-col justify-start items-center border-t dark:border-neutral-700 overflow-auto",children:(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center border dark:border-neutral-700 rounded-lg px-2 py-1 w-full group",children:[(0,s.jsxs)("div",{className:"flex flex-row justify-start items-center gap-2",children:[(0,s.jsx)(W.Z,{className:"h-5 w-5 text-neutral-500"}),(0,s.jsx)(L,{children:(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)("p",{className:"truncate hover:cursor-help",children:a.name})}),(0,s.jsx)(K,{children:(0,s.jsx)("p",{children:a.name})})]})}),(0,s.jsx)("p",{className:"text-xs text-neutral-500",children:(0,c.t)(a.size)})]}),(0,s.jsxs)("div",{className:"flex flex-row justify-end items-center gap-2",children:[r?(0,s.jsx)(V.Z,{className:"h-4 w-4 animate-spin text-neutral-500"}):(0,s.jsxs)("div",{className:"flex flex-row justify-start items-center text-xs rounded-full px-2 py-[0.5px] gap-1",children:[(0,s.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full"}),(0,s.jsx)("p",{className:"text-neutral-500",children:"Uploaded"})]}),(0,s.jsx)("button",{className:"text-neutral-400 p-1 rounded-lg hover:text-black transition-all hover:cursor-pointer",onClick:()=>{n(null)},children:(0,s.jsx)(M.Z,{className:"h-4 w-4"})})]})]})}),o&&(0,s.jsxs)("div",{className:"bg-orange-50 py-1 mx-2 rounded-lg text-center my-2 border border-orange-200 flex flex-row justify-center items-center gap-2",children:[(0,s.jsx)(W.Z,{className:"h-4 w-4 text-orange-400"}),(0,s.jsx)("p",{className:"text-orange-400 text-sm font-medium",children:o})]})]})}var U=a(9842);let _=l.memo(()=>{let[e,t]=(0,l.useState)(),[a,n]=(0,l.useState)(),[i,d]=(0,l.useState)(0),{onLoadWorkflow:c,onDownloadWorkflow:x,onSaveLocalWorkFlow:u,onUpdateLocalWorkFlowGraph:m,onUpdateLocalWorkFlowTitle:h}=(0,r.q)((0,o.N)(e=>({onLoadWorkflow:e.onLoadWorkflow,onDownloadWorkflow:e.onDownloadWorkflow,onSaveLocalWorkFlow:e.onSaveLocalWorkFlow,onUpdateLocalWorkFlowGraph:e.onUpdateLocalWorkFlowGraph,onUpdateLocalWorkFlowTitle:e.onUpdateLocalWorkFlowTitle}))),f=(0,l.useCallback)(()=>{u(e),d(i+1),G.Am.success("Success! ".concat(null!=e?e:"Your workflow"," have been saved."))},[i,u,e]),j=(0,l.useCallback)((e,t)=>{(0,p.Sf)(e),d(i+1),G.Am.info("".concat(t," has been deleted."))},[i]),g=(0,l.useCallback)((e,t)=>{e?(c(e),d(i+1),G.Am.success("Success! ".concat(t," have been loaded."))):G.Am.error("Error! Invalid workflow data.")},[i,c]),b=(0,l.useCallback)((e,t)=>{m(e),d(i+1),G.Am.success("Success! ".concat(t," have been update."))},[i,m]),v=(0,l.useCallback)((e,t)=>{h(e,t),d(i+1),G.Am.success("Success! the workflow have been renamed to ".concat(t," ."))},[i,h]);(0,l.useCallback)(()=>{(0,p.W)(),c(T.Z),d(i+1),G.Am.success("Success! load default workflow.")},[i,c]);let w=(0,l.useCallback)(e=>{(0,p.Sk)(e,e=>{e?(c(e),G.Am.success("Success! the workflow have been loaded.")):G.Am.error("Error! Invalid workflow file.")})},[i,c]);return(0,l.useEffect)(()=>{try{let e=(0,p.qW)();Array.isArray(e)?n(e.sort((e,t)=>t.time-e.time)):console.error("Invalid local workflows data")}catch(e){console.error("Error retrieving local workflows:",e)}},[i]),(0,l.useCallback)((e,t)=>(0,s.jsx)(R,{item:e,index:t,handleLoad:g,handleUpdate:b,handleDelete:j,handleRename:v}),[j,g,v,b]),(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsx)(z.z,{className:"bg-border hover:bg-black text-white mt-3 mx-5",onClick:f,children:"Save"}),(0,s.jsx)(P,{onUpload:w}),(0,s.jsxs)("div",{children:[(0,s.jsx)(U._,{children:"Local Workflows"}),null==a?void 0:a.map((e,t)=>(0,s.jsx)("li",{className:"border-b border-gray-200 last:border-b-0 list-none",children:(0,s.jsx)(R,{item:e,index:t,handleLoad:g,handleUpdate:b,handleDelete:j,handleRename:v})},e.id))]})]})}),B=e=>{let{setOpen:t}=e;return(0,s.jsxs)(v.PK,{children:[(0,s.jsx)(v.t9,{asChild:!0}),(0,s.jsx)(v.cZ,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"bg-black p-6 rounded-lg shadow-lg",children:[(0,s.jsx)(v.$N,{className:"text-lg font-bold",children:"Are you sure?"}),(0,s.jsx)(v.Be,{className:"text-sm",children:"This action will clear the graph. Do you want to proceed?"}),(0,s.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,s.jsx)(v.GG,{asChild:!0,children:(0,s.jsx)(z.z,{onClick:()=>t(!1),variant:"outline",children:"Cancel"})}),(0,s.jsx)(z.z,{onClick:()=>{t(!1)},children:"Confirm"})]})]})})]})};var J=a(5509),Y=a(2558);let Q=e=>{let{open:t,setOpen:a}=e,{edgeType:l,onEdgesType:n}=(0,r.q)((0,o.N)(e=>({edgeType:e.edgeType,onEdgesType:e.onEdgesType}))),i=[{label:"Client Frontend",item:e=>(0,s.jsxs)(J.Ph,{children:[(0,s.jsx)(J.i4,{className:"w-32",children:(0,s.jsx)(J.ki,{placeholder:"sabre"})}),(0,s.jsx)(J.Bw,{children:e.map(e=>(0,s.jsx)(J.Ql,{value:e,children:e},e))})]}),options:["classic","sabre"]},{label:"Edge Type",item:e=>(0,s.jsxs)(J.Ph,{value:l.name,onValueChange:e=>n(Y.v.find(t=>t.name===e)),children:[(0,s.jsx)(J.i4,{className:"w-32",children:(0,s.jsx)(J.ki,{placeholder:(0,s.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[l.icon,(0,d.Z)(l.name)]})})}),(0,s.jsx)(J.Bw,{className:"w-full",children:e.map(e=>(0,s.jsx)(J.Ql,{className:"w-full",value:e.name,children:(0,s.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[e.icon,(0,d.Z)(e.name)]})},e.name))})]}),options:Y.v}];return(0,s.jsx)(v.PK,{children:(0,s.jsx)(v.cZ,{className:"absolute inset-0 w-96 h-52 p-4 mx-auto my-auto bg-black rounded-[12px]",children:(0,s.jsxs)("div",{className:"w-full h-full bg-black p-1 shadow-lg relative",children:[(0,s.jsx)(v.$N,{className:"text-lg font-bold mt-0.5 mr-10",children:"Settings"}),(0,s.jsx)(v.GG,{asChild:!0,children:(0,s.jsx)(z.z,{className:"absolute top-0 right-2 p-1 bg-transparent hover:bg-transparent border-none shadow-none",onClick:()=>a(!1),variant:"outline",children:(0,s.jsx)(m.Pxu,{})})}),(0,s.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:i.map(e=>(0,s.jsxs)("div",{className:"flex flex-row justify-between items-center gap-1",children:[(0,s.jsx)("label",{className:"text-sm font-semibold",children:e.label}),e.item(e.options)]},e.label))})]})})})};var H=a(1348);let X=e=>{let{className:t}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:(0,c.cn)("w-6 h-6 ",t),children:(0,s.jsx)("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})},$=e=>{let{className:t}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:(0,c.cn)("w-6 h-6 ",t),children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"})})},ee=e=>{let{loadingStates:t,value:a=0}=e;return(0,s.jsx)("div",{className:"flex relative justify-start max-w-xl mx-auto flex-col mt-40",children:t.map((e,t)=>{let l=Math.abs(t-a);return(0,s.jsxs)(i.E.div,{className:(0,c.cn)("justify-between flex gap-2 mb-4"),initial:{opacity:0,y:-(40*a)},animate:{opacity:Math.max(1-.2*l,0),y:-(40*a)},transition:{duration:.5},children:[(0,s.jsxs)("div",{children:[t>a&&(0,s.jsx)(X,{className:"h-5 w-5 text-black dark:text-white"}),t<=a&&(0,s.jsx)($,{className:(0,c.cn)("h-5 w-5","text-black dark:text-white",a===t&&"text-black dark:text-lime-500 opacity-100")})]}),(0,s.jsx)("span",{className:(0,c.cn)("text-sm text-right text-black dark:text-white",a===t&&"text-black dark:text-lime-500 opacity-100"),children:e.text})]},t)})})},et=e=>{let{loadingStates:t,loading:a,duration:n=1e4,loop:r=!1}=e,[o,d]=(0,l.useState)(0);return(0,l.useEffect)(()=>{if(!a){d(0);return}let e=setTimeout(()=>{d(e=>r?e===t.length-1?0:e+1:Math.min(e+1,t.length-1))},n);return()=>clearTimeout(e)},[o,a,r,t.length,n]),(0,s.jsx)(H.M,{mode:"wait",children:a&&(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,c.cn)("fixed -bottom-56 right-0 z-[100] h-[80px] backdrop-blur-md"),children:(0,s.jsx)("div",{className:"h-96  relative",children:(0,s.jsx)(ee,{value:o,loadingStates:t})})})})},ea=[{text:"CheckpointLoaderSimple"},{text:"KSampler"}],es=e=>{let{content:t,children:a}=e;return(0,s.jsxs)(A,{children:[(0,s.jsx)(Z,{asChild:!0,children:a}),(0,s.jsx)(K,{side:"left",className:"text-xs",children:t})]})},el=()=>{let[e,t]=(0,l.useState)(!1),[a,n]=(0,l.useState)(0),{onSubmit:i,queue:d,onDeleteFromQueue:x,promptError:u,onEdgesAnimate:h,expanded:p,onExpand:f}=(0,r.q)((0,o.N)(e=>({onSubmit:e.onSubmit,queue:e.queue,onDeleteFromQueue:e.onDeleteFromQueue,promptError:e.promptError,onEdgesAnimate:e.onEdgesAnimate,onExpand:e.onExpand,expanded:e.expanded})));(0,l.useEffect)(()=>{void 0!==u&&G.Am.error(u)},[u,a]),(0,l.useEffect)(()=>{h(d.length>0)},[d,h]);let j=(0,l.useCallback)(()=>{t(!0),i(),n(e=>e+1)},[i]);return d.length,(0,s.jsxs)(A,{children:[(0,s.jsx)(et,{loadingStates:ea,loading:e}),(0,s.jsx)(Z,{asChild:!0,children:(0,s.jsx)(z.z,{className:(0,c.cn)("relative h-12 w-12 rounded-3xl shadow-lg bg-gradient-to-b text-white dark:text-black dark:from-white dark:to-blue-50 ring-2 ring-blue-50 ring-opacity-60","from-slate-800 to-slate-700 ring-slate-400","hover:rounded-lg transition-all duration-200"),onClick:j,children:(0,s.jsx)(m.o1U,{})})}),(0,s.jsx)(K,{side:"left",className:"text-xs bg-white text-black",children:"Queue prompt"})]})};var en=l.memo(()=>{let[e,t]=(0,l.useState)(!1),[a,n]=(0,l.useState)(!1),[i,o]=(0,l.useState)(!1),[d,c]=(0,l.useState)(!1),{expanded:x,onExpand:u}=(0,r.q)(e=>({expanded:e.expanded,onExpand:e.onExpand})),h=()=>{n(!a),u()};return(0,s.jsx)(L,{delayDuration:0,children:(0,s.jsxs)("div",{className:"fixed right-4 top-4 flex flex-col gap-3 m-2",children:[(0,s.jsx)(el,{}),(0,s.jsxs)(y,{modal:!0,open:e,onOpenChange:t,children:[(0,s.jsx)(es,{content:"Save/load workflows",children:(0,s.jsx)(k,{asChild:!0,children:(0,s.jsx)(z.z,{onClick:()=>t(!e),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,s.jsx)(m.otr,{})})})}),(0,s.jsx)(D,{side:"left",className:"overflow-y-scroll",children:(0,s.jsx)(_,{})})]}),(0,s.jsx)(es,{content:"Recalculate node positions",children:(0,s.jsx)(z.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,s.jsx)(m.tPC,{})})}),(0,s.jsx)(es,{content:"Toggle parameter dropdowns",children:(0,s.jsx)(z.z,{onClick:()=>h(),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:a?(0,s.jsx)(m.hNW,{}):(0,s.jsx)(m.RgI,{})})}),(0,s.jsxs)(v.Vq,{open:i,onOpenChange:o,children:[(0,s.jsx)(es,{content:"Clear graph",children:(0,s.jsx)(v.hg,{asChild:!0,children:(0,s.jsx)(z.z,{onClick:()=>o(!0),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,s.jsx)(m.XHJ,{})})})}),(0,s.jsx)(B,{setOpen:o})]}),(0,s.jsxs)(v.Vq,{open:d,onOpenChange:c,children:[(0,s.jsx)(es,{content:"Settings",children:(0,s.jsx)(v.hg,{asChild:!0,children:(0,s.jsx)(z.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,s.jsx)(m.UG6,{})})})}),(0,s.jsx)(Q,{open:d,setOpen:c})]})]})})}),er=a(3606),ei=a(5314),eo=a(8969),ed=a(6051),ec=a(4228),ex=a(1774),eu=a(5209);let em={maxHistorySize:100,enableShortcuts:!0};var eh=function(){let{maxHistorySize:e=em.maxHistorySize,enableShortcuts:t=em.enableShortcuts}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:em,[a,s]=(0,l.useState)([]),[n,r]=(0,l.useState)([]),{setNodes:i,setEdges:o,getNodes:d,getEdges:c}=(0,er._K)(),x=(0,l.useCallback)(()=>{s(t=>[...t.slice(t.length-e+1,t.length),{nodes:d(),edges:c()}]),r([])},[d,c,e]),u=(0,l.useCallback)(()=>{let e=a[a.length-1];e&&(s(e=>e.slice(0,e.length-1)),r(e=>[...e,{nodes:d(),edges:c()}]),i(e.nodes),o(e.edges))},[i,o,d,c,a]),m=(0,l.useCallback)(()=>{let e=n[n.length-1];e&&(r(e=>e.slice(0,e.length-1)),s(e=>[...e,{nodes:d(),edges:c()}]),i(e.nodes),o(e.edges))},[i,o,d,c,n]);return(0,l.useEffect)(()=>{if(!t)return;let e=e=>{"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(m(),e.preventDefault()):"z"===e.key&&(e.ctrlKey||e.metaKey)&&(u(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[u,m,t]),{undo:u,redo:m,takeSnapshot:x,canUndo:!a.length,canRedo:!n.length}};a(7333);var ep=e=>{let{strength:t=-1e3,distance:a=1e3}=e,n=(0,l.useMemo)(()=>({[eu.f]:eu.Z}),[]),{theme:i}=(0,ex.F)(),d=(0,l.useRef)(null),c=(0,l.useRef)(!0),{takeSnapshot:x}=eh(),[u,m]=(0,l.useState)(null),{nodes:h,edges:f,onInit:j,onNodesChange:g,onEdgesChange:b,onConnect:v,onAddNode:w,onCopyNode:N,onPasteNode:y,onSetNodesGroup:k,onDeleteNode:C,onCreateGroup:S}=(0,r.q)((0,o.N)(e=>({nodes:e.nodes,edges:e.edges,onInit:e.onInit,onNodesChange:(0,ec.Z)(e.onNodesChange,1),onEdgesChange:(0,ec.Z)(e.onEdgesChange,1),onConnect:e.onConnect,onAddNode:e.onAddNode,onCopyNode:e.onCopyNode,onPasteNode:e.onPasteNode,onSetNodesGroup:e.onSetNodesGroup,onDeleteNode:e.onDeleteNode,onCreateGroup:e.onCreateGroup}))),E=(0,l.useCallback)(()=>{c.current=!1},[]),D=(0,l.useCallback)((e,t)=>{x(),c.current=!0,b([{id:e.id,type:"remove"}]),v(t)},[b,v,x]),z=(0,l.useCallback)((e,t)=>{c.current||b([{id:t.id,type:"remove"}]),c.current=!0},[b]),O=(0,l.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),L=(0,l.useCallback)(e=>{e.preventDefault();let t=JSON.parse(e.dataTransfer.getData("application/reactflow"));if(!t)return;let a=(0,p.yY)(e.clientX,e.clientY,d,u);x(),w({widget:t,position:a})},[u,w,x]),A=(0,l.useCallback)((e,t,a)=>{x(),a.length>2||"Group"!==t.data.name||u.getIntersectingNodes(t).filter(e=>"Group"!==e.data.name&&(e.parentNode===t.id||!e.parentNode)).map(e=>e.id)},[u,x]),Z=(0,l.useCallback)(()=>{let e=N();navigator.clipboard.writeText(JSON.stringify(e)),console.log("[Copy]",e)},[N]),K=(0,l.useCallback)(async()=>{try{let e=await navigator.clipboard.readText(),t=JSON.parse(e),a=(0,p.rf)(d,u);t&&y(t,a),console.log("[Paste]",t,a)}catch(e){console.log("[Paste]",e)}},[u,y]),T=(0,l.useCallback)(e=>{if(e.metaKey||e.ctrlKey&&!e.altKey){let t={KeyC:Z,KeyV:K,KeyG:S}[e.code];t&&t()}else("Delete"===e.code||"Backspace"===e.code)&&u.getNodes().forEach(e=>e.selected&&C(e.id))},[u,Z,K,S,C]);return(0,l.useEffect)(()=>(window.addEventListener("keydown",T),()=>{window.removeEventListener("keydown",T)}),[T]),(0,s.jsxs)(er.x$,{nodes:h,edges:f,nodeTypes:n,ref:d,fitView:!0,snapGrid:[20,20],minZoom:.05,multiSelectionKeyCode:["Shift"],deleteKeyCode:[],disableKeyboardA11y:!0,onNodesChange:g,onEdgesChange:b,onEdgeUpdate:D,onEdgeUpdateStart:E,onEdgeUpdateEnd:z,onConnect:v,onNodeDragStart:A,onDrop:L,onDragOver:O,onInit:e=>{m(e),j()},children:[(0,s.jsx)(ei.A,{variant:ei.T.Dots}),(0,s.jsx)(eo.Z,{showZoom:!1}),(0,s.jsx)(ed.a,{position:"bottom-left",nodeColor:e=>e.data.color||("light"===i?"#ECF0F1":"#2C3E50"),style:{width:150,height:100}})]})};function ef(){return(0,s.jsxs)("div",{className:"h-screen",children:[(0,s.jsx)(er.tV,{children:(0,s.jsx)(b,{children:(0,s.jsx)(ep,{})})}),(0,s.jsx)(en,{})]})}}},function(e){e.O(0,[310,780,929,579,14,971,69,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);