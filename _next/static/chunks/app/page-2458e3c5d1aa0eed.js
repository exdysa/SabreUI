(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4143:function(e,t,s){Promise.resolve().then(s.bind(s,4744))},4744:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return e9}});var a,r,l=s(7437),n=s(9655),i=s(2265),o=s(3606);let d={maxHistorySize:100,enableShortcuts:!0};var c=function(){let{maxHistorySize:e=d.maxHistorySize,enableShortcuts:t=d.enableShortcuts}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,[s,a]=(0,i.useState)([]),[r,l]=(0,i.useState)([]),{setNodes:n,setEdges:c,getNodes:u,getEdges:h}=(0,o._K)(),f=(0,i.useCallback)(()=>{a(t=>[...t.slice(t.length-e+1,t.length),{nodes:u(),edges:h()}]),l([])},[u,h,e]),x=(0,i.useCallback)(()=>{let e=s[s.length-1];e&&(a(e=>e.slice(0,e.length-1)),l(e=>[...e,{nodes:u(),edges:h()}]),n(e.nodes),c(e.edges))},[n,c,u,h,s]),m=(0,i.useCallback)(()=>{let e=r[r.length-1];e&&(l(e=>e.slice(0,e.length-1)),a(e=>[...e,{nodes:u(),edges:h()}]),n(e.nodes),c(e.edges))},[n,c,u,h,r]);return(0,i.useEffect)(()=>{if(!t)return;let e=e=>{"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(m(),e.preventDefault()):"z"===e.key&&(e.ctrlKey||e.metaKey)&&(x(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[x,m,t]),{undo:x,redo:m,takeSnapshot:f,canUndo:!s.length,canRedo:!r.length}},u=s(970),h=s(2177);let f={default:(0,l.jsx)(h.ecD,{}),straight:(0,l.jsx)(h.fOV,{}),step:(0,l.jsx)(h.FZO,{}),smoothstep:(0,l.jsx)(h.u9l,{})},x=e=>{let{onEdgesType:t}=e;return[{icon:f.default,label:"Bezier",key:"default",onClick:()=>t("default")},{icon:f.straight,label:"Straight",key:"straight",onClick:()=>t("straight")},{icon:f.step,label:"Step",key:"step",onClick:()=>t("step")}]};var m=s(5087);function p(e){let{children:t}=e,{undo:s,redo:a,canUndo:r,canRedo:i}=c(),{edgeType:o,onEdgesType:d}=(0,u.q)((0,m.N)(e=>({edgeType:e.edgeType,onEdgesType:e.onEdgesType}))),{onExpand:h,expanded:f}=(0,u.q)(e=>({onExpand:e.onExpand,expanded:e.expanded}));return(0,l.jsxs)(n.xV,{children:[(0,l.jsx)(n.W4,{children:t}),(0,l.jsxs)(n.h_,{className:"w-64",children:[(0,l.jsxs)(n.Zo,{inset:!0,onClick:s,disabled:!r,children:["Undo",(0,l.jsx)(n.cX,{children:"⌘Z"})]}),(0,l.jsxs)(n.Zo,{inset:!0,onClick:a,disabled:!i,children:["Redo",(0,l.jsx)(n.cX,{children:"⌘ShiftZ"})]}),(0,l.jsx)(n.Zo,{inset:!0,children:"Export worfklow"}),(0,l.jsxs)(n.qu,{children:[(0,l.jsx)(n.xx,{inset:!0,children:"Change edge type"}),(0,l.jsx)(n.dp,{className:"w-48",children:x({onEdgesType:d}).map(e=>{let{icon:t,label:s,key:a,onClick:r}=e;return(0,l.jsxs)(n.$c,{onSelect:r,checked:o===a,children:[t,(0,l.jsx)("span",{className:"ml-2",children:s})]},a)})})]}),(0,l.jsx)(n.uP,{}),(0,l.jsxs)(n.$c,{checked:f.length>0,onCheckedChange:()=>h(),children:["Show parameters",(0,l.jsx)(n.cX,{children:"⌘⇧B"})]})]})]})}var g=s(4694),j=s(1657);let v=g.fC,b=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(g.aV,{ref:t,className:(0,j.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",s),...a})});b.displayName=g.aV.displayName;let y=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(g.xz,{ref:t,className:(0,j.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-md",s),...a})});y.displayName=g.xz.displayName;let w=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(g.VY,{ref:t,className:(0,j.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",s),...a})});w.displayName=g.VY.displayName;var N=s(2936),k=s(7742),C=s(2235);let S=N.fC,z=N.xz;N.x8;let E=N.h_,L=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(N.aV,{className:(0,j.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...a,ref:t})});L.displayName=N.aV.displayName;let M=(0,k.j)("fixed z-50 gap-4 bg-background p-6 shadow-xl transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-200 data-[state=open]:duration-200",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),R=i.forwardRef((e,t)=>{let{side:s="right",className:a,children:r,...n}=e;return(0,l.jsxs)(E,{children:[(0,l.jsx)(L,{}),(0,l.jsxs)(N.VY,{ref:t,className:(0,j.cn)(M({side:s}),a),...n,children:[r,(0,l.jsxs)(N.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[(0,l.jsx)(C.Z,{className:"h-4 w-4"}),(0,l.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});R.displayName=N.VY.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(N.Dx,{ref:t,className:(0,j.cn)("text-lg font-semibold text-foreground",s),...a})}).displayName=N.Dx.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(N.dk,{ref:t,className:(0,j.cn)("text-sm text-muted-foreground",s),...a})}).displayName=N.dk.displayName;var D=s(5754),W=s(2638),Z=s(7805),A=s(9259),O=s(7501);let V=W.fC,U=W.xz,B=W.ZA;W.Uv,W.Tr,W.Ee,i.forwardRef((e,t)=>{let{className:s,inset:a,children:r,...n}=e;return(0,l.jsxs)(W.fF,{ref:t,className:(0,j.cn)("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",a&&"pl-8",s),...n,children:[r,(0,l.jsx)(Z.Z,{className:"ml-auto h-4 w-4"})]})}).displayName=W.fF.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(W.tu,{ref:t,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a})}).displayName=W.tu.displayName;let K=i.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...r}=e;return(0,l.jsx)(W.Uv,{children:(0,l.jsx)(W.VY,{ref:t,sideOffset:a,className:(0,j.cn)("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})})});K.displayName=W.VY.displayName;let F=i.forwardRef((e,t)=>{let{className:s,inset:a,...r}=e;return(0,l.jsx)(W.ck,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",a&&"pl-8",s),...r})});F.displayName=W.ck.displayName,i.forwardRef((e,t)=>{let{className:s,children:a,checked:r,...n}=e;return(0,l.jsxs)(W.oC,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),checked:r,...n,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(W.wU,{children:(0,l.jsx)(A.Z,{className:"h-4 w-4"})})}),a]})}).displayName=W.oC.displayName,i.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,l.jsxs)(W.Rk,{ref:t,className:(0,j.cn)("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",s),...r,children:[(0,l.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,l.jsx)(W.wU,{children:(0,l.jsx)(O.Z,{className:"h-2 w-2 fill-current"})})}),a]})}).displayName=W.Rk.displayName,i.forwardRef((e,t)=>{let{className:s,inset:a,...r}=e;return(0,l.jsx)(W.__,{ref:t,className:(0,j.cn)("px-2 py-1.5 text-sm font-semibold",a&&"pl-8",s),...r})}).displayName=W.__.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(W.Z0,{ref:t,className:(0,j.cn)("-mx-1 my-1 h-px bg-muted",s),...a})}).displayName=W.Z0.displayName;var _=s(4732),q=s(1353),I=s(7014),T=s(5849),Y=s(8325);let $=e=>{let{isRequired:t,position:s}=e;return(0,l.jsx)("div",{className:"mt-1.5 react-flow__handle ".concat(t?"bg-primary":"bg-border"," ").concat("left"===s?"mr-2":"ml-2"),style:{width:"12px",height:"12px",position:"absolute",[s]:-3}})};var G=i.memo(e=>{let{data:t}=e,{outputs:s,params:a,inputs:r}=(0,i.useMemo)(()=>{let e=t.output.map(e=>({name:e,type:e})),s=[],a=[];return Object.entries(t.input.required).forEach(e=>{let[t,r]=e;I.lj.isParameterOrList(r)?s.push({name:t,type:r[0],input:r}):a.push({name:t,type:r[0]})}),{outputs:e,params:s,inputs:a}},[t]);return(0,l.jsx)(q.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:20,duration:.15},className:"relative w-[350px]",children:(0,l.jsxs)(Y.Z,{title:t.name,active:!1,preview:!0,children:[(0,l.jsxs)("div",{className:"flex w-full items-stretch justify-between space-x-6",children:[(0,l.jsx)("div",{className:"flex-1",children:r.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)($,{position:"left",isRequired:1}),(0,l.jsx)("span",{className:"text-sm",children:(0,T.Z)(e.name)})]},t))}),(0,l.jsx)("div",{className:"flex-1 text-right",children:s.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-end",children:[(0,l.jsx)("span",{className:"text-sm",children:(0,T.Z)(e.name)}),(0,l.jsx)($,{position:"right",isRequired:1})]},t))})]}),(0,l.jsx)("div",{className:"mt-4",children:a.map((e,t)=>(0,l.jsx)("div",{className:"flex items-center",children:(0,l.jsx)("span",{className:"text-sm",children:(0,T.Z)(e.name)})},t))})]})})}),H=s(512),P=i.memo(e=>{let{cat:t,data:s,onAddNode:a,expand:r}=e,[n,o]=(0,i.useState)(!1),[d,c]=(0,i.useState)(null),[u,h]=(0,i.useState)(r?[t]:[]),f=(0,i.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},[]),x=e=>{o(!0),c(e)},m=()=>{o(!1)};return(0,i.useEffect)(()=>{r?h([t]):h([])},[r,t]),(0,l.jsxs)(H.UQ,{type:"multiple",value:u,onValueChange:h,children:[(0,l.jsxs)(H.Qd,{value:t,className:"rounded-lg px-4 bg-background shadow-md border dark:border-0",children:[(0,l.jsx)(H.o4,{className:"py-3 text-sm text-left",children:(0,T.Z)(t)}),(0,l.jsxs)(H.vF,{children:[(0,l.jsx)("div",{className:"flex my-1 mb-4 w-full h-[1px] bg-gradient-to-r from-transparent via-gray-300 dark:via-gray-800 to-transparent"}),(0,l.jsx)("div",{className:"flex flex-wrap items-baseline justify-start",children:s.map((e,t)=>(0,l.jsx)("button",{className:(0,j.cn)("cursor-grab shadow-sm mr-1 my-1","px-3 py-2.5 rounded-full border border-neutral-300 dark:border-neutral-600 bg-background text-neutral-700 dark:text-neutral-200 text-xs hover:-translate-y-1 transform transition duration-200 hover:shadow-md"),onClick:t=>{t.preventDefault(),a({widget:e})},draggable:!0,onDragStart:t=>f(t,e),onMouseEnter:()=>x(t),onMouseLeave:m,children:(0,T.Z)(e.name)},e.name))})]})]}),n&&null!==d&&(0,l.jsx)("div",{className:"fixed z-[60] md:left-[400px] top-1/2 transform -translate-y-1/2 bg-muted/50 p-8 rounded-lg border backdrop-blur-sm",children:(0,l.jsx)(G,{data:s[d]})})]})}),J=s(6391);let X=(0,k.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background active:scale-95 scale-100 transition duration-200 transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),Q=i.forwardRef((e,t)=>{let{className:s,variant:a,size:r,...n}=e;return(0,l.jsx)(J.f,{ref:t,className:(0,j.cn)(X({variant:a,size:r,className:s})),...n})});Q.displayName=J.f.displayName;var ee=i.memo(()=>{let{widgets:e,onAddNode:t}=(0,u.q)((0,m.N)(e=>({widgets:e.widgets,onAddNode:e.onAddNode}))),[s,a]=(0,i.useState)({}),[r,n]=(0,i.useState)(""),[o,d]=(0,i.useState)(!1),[c,f]=(0,i.useState)([]);(0,i.useEffect)(()=>{let t={},s=Object.values(e);for(let e of(r&&(s=s.filter(e=>e.name.toLowerCase().includes(r.toLowerCase()))),s))t[e.category]?t[e.category].push(e):t[e.category]=[e];a(t)},[e,r]);let x=(0,i.useCallback)(e=>{n(e.target.value)},[]);return(0,l.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,l.jsxs)("div",{className:"flex gap-2 px-2",children:[(0,l.jsxs)("div",{className:"relative w-full",children:[(0,l.jsx)("input",{name:"search",type:"text",className:"px-9 flex h-9 w-full rounded-md border border-input bg-transparent py-1 text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search...",onChange:x}),(0,l.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2   flex items-center   pointer-events-none",children:(0,l.jsx)(h._Ve,{className:"w-4 h-4 text-gray-400"})})]}),(0,l.jsx)(Q,{onClick:()=>{o?f([]):Object.keys(s).forEach((e,t)=>{setTimeout(()=>{f(t=>[...t,e])},t<6?100*t:500)}),d(!o)},variant:"outline",className:"h-9",children:(0,l.jsx)(h.jnn,{})})]}),(0,l.jsx)("div",{className:"flex flex-col gap-4 overflow-auto px-2 pb-4",children:Object.entries(s).map((e,s)=>{let[a,r]=e;return(0,l.jsx)(q.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:s<16?.05*s:.4,duration:.2},children:(0,l.jsx)(P,{data:r,cat:a,onAddNode:t,expand:c.includes(a)},a)},a)})})]})}),et=s(9326),es=s(5179),ea=s(6329),er=s(6490),el=s(699),en=s(4715);let ei=(0,k.j)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function eo(e){let{className:t,variant:s,...a}=e;return(0,l.jsx)("div",{className:(0,j.cn)(ei({variant:s}),t),...a})}var ed=s(2178);let ec=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(ed.fC,{ref:t,className:(0,j.cn)("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",s),...a})});ec.displayName=ed.fC.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(ed.Ee,{ref:t,className:(0,j.cn)("aspect-square h-full w-full",s),...a})}).displayName=ed.Ee.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(ed.NY,{ref:t,className:(0,j.cn)("flex h-full w-full items-center justify-center rounded-full bg-muted",s),...a})}).displayName=ed.NY.displayName;var eu=i.memo(e=>{let{item:t,index:s,handleRename:a,handleUpdate:r,handleDelete:n,handleLoad:o}=e,[d,c]=(0,i.useState)(!1),u=(0,i.useCallback)(e=>{c(!1);let s=e.target.value;s&&a(t.id,s)},[a,t.id]),f=(0,i.useCallback)(()=>{o(t.graph,t.title)},[o,t.graph,t.title]),x=(0,i.useCallback)(()=>{c(!0)},[]),m=(0,i.useCallback)(()=>{r(t.id,t.title)},[r,t.id,t.title]),p=(0,i.useCallback)(()=>{(0,I.Cq)(t.graph,t.title)},[t.graph,t.title]),g=(0,i.useCallback)(()=>{n(t.id,t.title)},[n,t.id,t.title]),j=(0,i.useCallback)(()=>d?(0,l.jsx)(es.I,{defaultValue:t.title,onBlur:u}):(0,l.jsxs)("a",{title:"Load",onClick:f,children:[t.title,0===s&&(0,l.jsx)(eo,{color:"blue",style:{marginLeft:4},children:"Recent"})]}),[d,t.title,s,u,f]);return(0,l.jsx)("ul",{className:"list-none p-0 m-0",children:(0,l.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,l.jsxs)("div",{className:"flex justify-between",children:[(0,l.jsxs)("div",{children:[(0,l.jsxs)("a",{title:"Load",onClick:f,className:"flex items-center space-x-2",children:[(0,l.jsx)(ec,{className:"inline-block",children:t.title[0].toUpperCase()}),(0,l.jsx)("span",{children:j()})]}),(0,l.jsx)("div",{className:"text-sm text-gray-600",children:(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(ea.Z,{}),(0,l.jsx)("span",{children:Object.keys(t.graph.data).length})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(h.Tlk,{}),(0,l.jsx)("span",{children:t.graph.connections.length})]}),(0,l.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,l.jsx)(er.Z,{}),(0,l.jsx)("span",{children:(()=>{let e=new Date(t.time);return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)})()})]})]})})]}),(0,l.jsxs)("div",{className:"flex space-x-2",children:[(0,l.jsx)(D.z,{onClick:x,children:(0,l.jsx)(h.JtS,{})}),(0,l.jsx)(D.z,{onClick:m,children:(0,l.jsx)(el.Z,{})}),(0,l.jsx)(D.z,{onClick:p,children:(0,l.jsx)(en.Z,{})}),(0,l.jsx)(D.z,{onClick:g,children:(0,l.jsx)(h.XHJ,{})})]})]})},t.id)})}),eh=s(6288),ef=s(4509),ex=s(3428),em=s(9580),ep=s(489),eg=s(8152);let ej=eg.zt,ev=eg.fC,eb=eg.xz,ey=i.forwardRef((e,t)=>{let{className:s,sideOffset:a=4,...r}=e;return(0,l.jsx)(eg.VY,{ref:t,sideOffset:a,className:(0,j.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...r})});function ew(e){let{onUpload:t}=e,[s,a]=(0,i.useState)(null),[r,n]=(0,i.useState)(!1),[o,d]=(0,i.useState)(""),{dragOver:c,setDragOver:u,onDragOver:h,onDragLeave:f}=function(){let[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)("");return{dragOver:e,setDragOver:t,onDragOver:e=>{e.preventDefault(),t(!0)},onDragLeave:()=>t(!1),fileDropError:s,setFileDropError:a}}(),x=()=>{s&&(n(!0),setTimeout(()=>{n(!1)},Math.max(1e3,Math.min(s.size/750,4e3))))};return(0,i.useEffect)(()=>{s&&!r&&x()},[s]),(0,l.jsx)(l.Fragment,{children:(0,l.jsxs)("div",{className:"mb-4",children:[(0,l.jsx)("div",{className:"border-b",children:(0,l.jsxs)("div",{className:"flex flex-row justify-start items-center px-4 py-2.5 gap-2",children:[(0,l.jsx)("div",{className:"rounded-full border p-2 flex flex-row justify-center items-center dark:border-neutral-700",children:(0,l.jsx)(ef.Z,{className:"h-5 w-5 text-neutral-600"})}),(0,l.jsxs)("div",{className:"space-y-0.5",children:[(0,l.jsx)("p",{className:"font-semibold mb-0",children:"Upload ComfyUI Workflow"}),(0,l.jsx)("p",{className:"text-sm text-neutral-500 -mt-1",children:"Drop your ComfyUI JSON API file."})]})]})}),(0,l.jsx)("label",{htmlFor:"file",onDragOver:h,onDragLeave:f,onDrop:e=>{e.preventDefault(),u(!1);let s=e.dataTransfer.files[0];return s?"application/json"!==s.type?d("Invalid file type! Only JSON files are accepted."):s.size>102400?d("File size exceeds the maximum limit of 100KB."):void(a(s),d(""),t(s)):d("No file selected.")},className:(0,j.cn)("px-4 py-2 border-[1.5px] border-dashed dark:border-neutral-700 m-4 rounded-lg flex flex-col justify-start items-center hover:cursor-pointer",c&&"border-blue-600 bg-blue-50"),children:(0,l.jsxs)("div",{className:"flex flex-col p-4 justify-start items-center text-center",children:[(0,l.jsx)(ef.Z,{className:(0,j.cn)("h-5 w-5 text-neutral-600 my-4",c&&"text-blue-500")}),(0,l.jsx)("p",{className:"font-semibold",children:"Choose a file or drag & drop it here"}),(0,l.jsx)("p",{className:"text-neutral-500 text-sm",children:"Only JSON files. Up to 100 KB."})]})}),(0,l.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",onChange:e=>{let s=e.target.files?e.target.files[0]:null;return s?"application/json"!==s.type?d("Invalid file type! Only JSON files are accepted."):s.size>102400?d("File size exceeds the maximum limit of 100KB."):void(a(s),d(""),t(s)):d("No file selected.")},accept:"application/json"}),s&&(0,l.jsx)("div",{className:"w-full px-4 py-2 gap-2 flex flex-col justify-start items-center border-t dark:border-neutral-700 overflow-auto",children:(0,l.jsxs)("div",{className:"flex flex-row justify-between items-center border dark:border-neutral-700 rounded-lg px-2 py-1 w-full group",children:[(0,l.jsxs)("div",{className:"flex flex-row justify-start items-center gap-2",children:[(0,l.jsx)(ex.Z,{className:"h-5 w-5 text-neutral-500"}),(0,l.jsx)(ej,{children:(0,l.jsxs)(ev,{children:[(0,l.jsx)(eb,{asChild:!0,children:(0,l.jsx)("p",{className:"truncate hover:cursor-help",children:s.name})}),(0,l.jsx)(ey,{children:(0,l.jsx)("p",{children:s.name})})]})}),(0,l.jsx)("p",{className:"text-xs text-neutral-500",children:(0,j.t)(s.size)})]}),(0,l.jsxs)("div",{className:"flex flex-row justify-end items-center gap-2",children:[r?(0,l.jsx)(em.Z,{className:"h-4 w-4 animate-spin text-neutral-500"}):(0,l.jsxs)("div",{className:"flex flex-row justify-start items-center text-xs rounded-full px-2 py-[0.5px] gap-1",children:[(0,l.jsx)("div",{className:"h-2 w-2 bg-green-400 rounded-full"}),(0,l.jsx)("p",{className:"text-neutral-500",children:"Uploaded"})]}),(0,l.jsx)("button",{className:"text-neutral-400 p-1 rounded-lg hover:text-black transition-all hover:cursor-pointer",onClick:()=>{a(null)},children:(0,l.jsx)(ep.Z,{className:"h-4 w-4"})})]})]})}),o&&(0,l.jsxs)("div",{className:"bg-orange-50 py-1 mx-2 rounded-lg text-center my-2 border border-orange-200 flex flex-row justify-center items-center gap-2",children:[(0,l.jsx)(ex.Z,{className:"h-4 w-4 text-orange-400"}),(0,l.jsx)("p",{className:"text-orange-400 text-sm font-medium",children:o})]})]})})}ey.displayName=eg.VY.displayName;var eN=s(9842),ek=i.memo(()=>{let[e,t]=(0,i.useState)(),[s,a]=(0,i.useState)(),[r,n]=(0,i.useState)(0),{onLoadWorkflow:o,onDownloadWorkflow:d,onSaveLocalWorkFlow:c,onUpdateLocalWorkFlowGraph:h,onUpdateLocalWorkFlowTitle:f}=(0,u.q)((0,m.N)(e=>({onLoadWorkflow:e.onLoadWorkflow,onDownloadWorkflow:e.onDownloadWorkflow,onSaveLocalWorkFlow:e.onSaveLocalWorkFlow,onUpdateLocalWorkFlowGraph:e.onUpdateLocalWorkFlowGraph,onUpdateLocalWorkFlowTitle:e.onUpdateLocalWorkFlowTitle})));(0,i.useCallback)(()=>{c(e),n(r+1),eh.Am.success("Success! ".concat(null!=e?e:"Your workflow"," have been saved."))},[r,c,e]);let x=(0,i.useCallback)((e,t)=>{(0,I.Sf)(e),n(r+1),eh.Am.info("".concat(t," has been deleted."))},[r]),p=(0,i.useCallback)((e,t)=>{e?(o(e),n(r+1),eh.Am.success("Success! ".concat(t," have been loaded."))):eh.Am.error("Error! Invalid workflow data.")},[r,o]),g=(0,i.useCallback)((e,t)=>{h(e),n(r+1),eh.Am.success("Success! ".concat(t," have been update."))},[r,h]),j=(0,i.useCallback)((e,t)=>{f(e,t),n(r+1),eh.Am.success("Success! the workflow have been renamed to ".concat(t," ."))},[r,f]);(0,i.useCallback)(()=>{(0,I.W)(),o(et.Z),n(r+1),eh.Am.success("Success! load default workflow.")},[r,o]);let v=(0,i.useCallback)(e=>{(0,I.Sk)(e,e=>{e?(o(e),eh.Am.success("Success! the workflow have been loaded.")):eh.Am.error("Error! Invalid workflow file.")})},[r,o]);return(0,i.useEffect)(()=>{try{let e=(0,I.qW)();Array.isArray(e)?a(e.sort((e,t)=>t.time-e.time)):console.error("Invalid local workflows data")}catch(e){console.error("Error retrieving local workflows:",e)}},[r]),(0,i.useCallback)((e,t)=>(0,l.jsx)(eu,{item:e,index:t,handleLoad:p,handleUpdate:g,handleDelete:x,handleRename:j}),[x,p,j,g]),(0,l.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,l.jsx)(ew,{onUpload:v}),(0,l.jsxs)("div",{children:[(0,l.jsx)(eN._,{children:"Local Workflows"}),null==s?void 0:s.map((e,t)=>(0,l.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,l.jsx)(eu,{item:e,index:t,handleLoad:p,handleUpdate:g,handleDelete:x,handleRename:j})},e.id))]})]})});class eC{constructor(e){this.subscribers=new Set,this.getValue=()=>this.value,this.subscribe=e=>(this.subscribers.add(e),()=>{this.subscribers.delete(e)}),this.next=e=>{this.value=e,this.subscribers.forEach(t=>t(e))},this.value=e}}let eS={idle:!0,playing:!1,buffering:!1,currentUrl:""};class ez{constructor(e){this.nodes=new Map,this.source=null,this.buffers=new Map,this.urls=[],this.state$=new eC({playing:!1,buffering:!1,idle:!0,currentUrl:""}),this.progress$=new eC(0),this.timeElapsed=0,this.currentSourceKey="",this.updateProgress=()=>{setInterval(()=>{if(this.source&&this.source.buffer){let e=100*this.timeElapsed++/this.source.buffer.duration;e>100&&this.next(),this.progress$.next(e)}},1e3)},this.setState=e=>{this.state$.next({...this.state$.getValue(),...e})},this.getState=e=>this.state$.getValue()[e],this.getByteFrequencyData=()=>{let e=new Uint8Array(this.analyser.frequencyBinCount);return this.analyser.getByteFrequencyData(e),Array.from(e)},this.selectSource=async e=>{if(this.source)try{this.source.stop(),this.source.disconnect()}catch(e){console.log(this.currentSourceKey,"cant stop")}if(this.urls.includes(e)){if(this.buffers.has(e)){let t=this.buffers.get(e);if(t){this.currentSourceKey=e,this.setState({currentUrl:e});let s=this.ctx.createBufferSource();this.source=s,this.source.buffer=t,this.timeElapsed=0,this.progress$.next(0),this.source.connect(this.analyser).connect(this.ctx.destination)}}else await this.loadBuffer(e)}else throw Error("No buffer found")},this.loadBuffer=async e=>{this.setState({buffering:!0});let t=await fetch(e),s=await t.arrayBuffer(),a=await this.ctx.decodeAudioData(s);this.buffers.set(e,a),this.selectSource(e).then(()=>{this.setState({buffering:!1})})},this.play=()=>{var e;(null===(e=this.source)||void 0===e?void 0:e.context.state)?this.ctx.resume():this.selectSource(this.currentSourceKey).then(()=>{var e;null===(e=this.source)||void 0===e||e.start(0)}),this.setState({playing:!0})},this.pause=()=>{this.setState({playing:!1}),this.ctx.suspend()},this.toggle=()=>{"running"===this.ctx.state?this.pause():this.play()},this.next=async()=>{var e;let t=this.urls.indexOf(this.currentSourceKey),s=t+1>this.urls.length-1?0:t+1;await this.selectSource(this.urls[s]),null===(e=this.source)||void 0===e||e.start(0)},this.prev=async()=>{var e;let t=this.urls.indexOf(this.currentSourceKey),s=0===t?this.urls.length-1:t-1;await this.selectSource(this.urls[s]),null===(e=this.source)||void 0===e||e.start(0)},this.urls=e,this.ctx=new AudioContext,this.analyser=this.ctx.createAnalyser(),this.analyser.fftSize=32,this.gainNode=this.ctx.createGain(),this.gainNode.gain.value=.5,this.currentSourceKey=e[0],this.setState({currentUrl:e[0]}),this.updateProgress()}}function eE(e){var t,s,a;return(0,i.useSyncExternalStore)(null!==(t=null==e?void 0:e.state$.subscribe)&&void 0!==t?t:()=>{},null!==(s=null==e?void 0:e.state$.getValue)&&void 0!==s?s:()=>eS,null!==(a=null==e?void 0:e.state$.getValue)&&void 0!==a?a:()=>eS)}let eL=e=>{let{percentage:t}=e,s=2*Math.PI*44;return(0,l.jsxs)("svg",{height:"100%",width:"100%",viewBox:"0 0 100 100",children:[(0,l.jsx)("circle",{cx:"50",cy:"50",r:44,fill:"none",stroke:"currentColor",strokeWidth:"10"}),(0,l.jsx)("circle",{cx:"50",cy:"50",r:44,fill:"none",strokeLinecap:"round",stroke:"rgba(88,240,160,1)",strokeWidth:"10",strokeDasharray:s,strokeDashoffset:s-t/100*s})]})},eM=()=>(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",id:"spotify",children:(0,l.jsx)("g",{fill:"none",stroke:"#303c42",strokeLinecap:"round",strokeLinejoin:"round","data-name":"<Group>",children:(0,l.jsx)("path",{d:"M5.5 15.5c3.42-.83 8.34-.72 11.5 1.5M5 12c5.77-1 10-.53 13.5 2m-14-5.5C9.19 6.84 15.81 7.16 20 10","data-name":"<Path>",stroke:"currentColor"})})}),eR=[{title:"Good night",url:"/audio/good-night.mp3"},{title:"一緒なら",url:"/audio/一緒なら.mp3"},{title:"i really like you",url:"/audio/i-really-like-u.mp3"},{title:"SHIBA INU",url:"/audio/shiba-inu.mp3"},{title:"Once in paris",url:"/audio/once-in-paris.mp3"}],eD=e=>{let{player:t}=e,s=(0,i.useRef)(),[a,r]=(0,i.useState)(Array.from(Array(16)).map(()=>0));return(0,i.useEffect)(()=>(s.current=setInterval(()=>{r(t.getByteFrequencyData())},1e3/60),()=>{clearInterval(s.current)}),[t]),(0,l.jsx)("div",{className:"w-full h-32 grid grid-cols-[repeat(14,minmax(0,1fr))] gap-[3px]",children:a.slice(1,15).map((e,t)=>(0,l.jsx)("div",{className:"col-span-1 flex flex-col gap-[3px]",children:Array.from(Array(10)).map((t,s)=>(0,l.jsxs)("div",{"data-on":(e+1)/s>16,className:"group w-full flex gap-[3px]",children:[(0,l.jsx)("div",{className:"transition-colors group-data-[on=true]:bg-zinc-900 bg-[rgba(30,245,140,1)] basis-1/2 aspect-square rounded-full bg-green-200"}),(0,l.jsx)("div",{className:"transition-colors group-data-[on=true]:bg-zinc-900 bg-[rgba(30,245,140,1)] basis-1/2 aspect-square rounded-full bg-green-200"})]},s))},t))})},eW=e=>{var t,s,a;let{player:r}=e,{playing:n}=eE(r),o=(0,i.useSyncExternalStore)(null!==(t=null==r?void 0:r.progress$.subscribe)&&void 0!==t?t:()=>{},null!==(s=null==r?void 0:r.progress$.getValue)&&void 0!==s?s:()=>0,null!==(a=null==r?void 0:r.progress$.getValue)&&void 0!==a?a:()=>0);return(0,l.jsxs)("div",{className:"size-16 text-zinc-900 relative",children:[(0,l.jsx)("button",{onClick:()=>{r.toggle()},className:"size-16 text-white/90 text-2xl border-zinc-900 border-4 rounded-full flex items-center justify-center active:scale-[0.98] active:bg-black/20",children:n?(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-pause-filled",width:"28",height:"28",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M9 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",strokeWidth:"0",fill:"currentColor"}),(0,l.jsx)("path",{d:"M17 4h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h2a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2z",strokeWidth:"0",fill:"currentColor"})]}):(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-play-filled",width:"28",height:"28",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M6 4v16a1 1 0 0 0 1.524 .852l13 -8a1 1 0 0 0 0 -1.704l-13 -8a1 1 0 0 0 -1.524 .852z",strokeWidth:"0",fill:"currentColor"})]})}),(0,l.jsx)("div",{className:"inset-0 absolute w-full h-full pointer-events-none",children:(0,l.jsx)(eL,{percentage:Math.min(100,o)})})]})},eZ=e=>{let{player:t}=e,{playing:s}=eE(t),a=(0,i.useRef)(),[r,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>(a.current=setInterval(()=>{n(e=>!e)},1e3),()=>{clearInterval(a.current)}),[s]),(0,l.jsx)("div",{className:"flex justify-center",children:(0,l.jsxs)("div",{"data-on":r&&s,className:"group relative size-14 rounded-full flex items-center justify-center bg-zinc-900 data-[on=true]:shadow[inset_0_0_12px_rgba(0,255,0,1)]",children:[(0,l.jsx)("div",{className:"w-full h-full rounded-full group-data-[on=true]:text-green-200 text-zinc-800",children:(0,l.jsx)(eM,{})}),(0,l.jsx)("div",{style:{background:"radial-gradient(rgba(30,215,96,0.1),transparent)"},className:"absolute z-1 size-48 rounded-full blur-xl opacity-0 group-data-[on=true]:opacity-100"})]})})},eA=()=>{var e;let t=(e=eR.map(e=>e.url),(0,i.useRef)(new ez(e)).current),[s,a]=(0,i.useState)(!1),{currentUrl:r}=eE(t),n=eR.find(e=>e.url===r);return((0,i.useEffect)(()=>{a(!0)},[]),s)?(0,l.jsxs)("div",{className:"w-full h-full flex flex-col gap-6 rounded-[23px] p-5",children:[(0,l.jsx)(eZ,{player:t}),(0,l.jsx)("div",{children:(0,l.jsx)(eD,{player:t})}),(0,l.jsx)("div",{className:"text-white/90 font-mono",children:null==n?void 0:n.title}),(0,l.jsxs)("div",{className:"flex items-center justify-between text-white/90 gap-3 w-full px-8",children:[(0,l.jsx)("button",{onClick:()=>t.prev(),className:"size-12 border-zinc-900 border-4 rounded-full flex items-center justify-center active:scale-[0.98] active:bg-black/20",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-track-prev-filled",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M20.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z",strokeWidth:"0",fill:"currentColor"}),(0,l.jsx)("path",{d:"M9.341 4.247l-8 7a1 1 0 0 0 0 1.506l8 7c.647 .565 1.659 .106 1.659 -.753v-14c0 -.86 -1.012 -1.318 -1.659 -.753z",strokeWidth:"0",fill:"currentColor"})]})}),(0,l.jsx)(eW,{player:t}),(0,l.jsx)("button",{onClick:()=>t.next(),className:"size-12 border-zinc-900 border-4 rounded-full flex items-center justify-center active:scale-[0.98] active:bg-black/20",children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-player-track-next-filled",width:"20",height:"20",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M2 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z",strokeWidth:"0",fill:"currentColor"}),(0,l.jsx)("path",{d:"M13 5v14c0 .86 1.012 1.318 1.659 .753l8 -7a1 1 0 0 0 0 -1.506l-8 -7c-.647 -.565 -1.659 -.106 -1.659 .753z",strokeWidth:"0",fill:"currentColor"})]})})]})]}):null};var eO=s(1348);let eV=e=>{let{className:t}=e;return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:(0,j.cn)("w-6 h-6 ",t),children:(0,l.jsx)("path",{d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})})},eU=e=>{let{className:t}=e;return(0,l.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:(0,j.cn)("w-6 h-6 ",t),children:(0,l.jsx)("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"})})},eB=e=>{let{loadingStates:t,value:s=0}=e;return(0,l.jsx)("div",{className:"flex relative justify-start max-w-xl mx-auto flex-col mt-40",children:t.map((e,t)=>{let a=Math.abs(t-s);return(0,l.jsxs)(q.E.div,{className:(0,j.cn)("justify-between flex gap-2 mb-4"),initial:{opacity:0,y:-(40*s)},animate:{opacity:Math.max(1-.2*a,0),y:-(40*s)},transition:{duration:.5},children:[(0,l.jsxs)("div",{children:[t>s&&(0,l.jsx)(eV,{className:"h-5 w-5 text-black dark:text-white"}),t<=s&&(0,l.jsx)(eU,{className:(0,j.cn)("h-5 w-5","text-black dark:text-white",s===t&&"text-black dark:text-lime-500 opacity-100")})]}),(0,l.jsx)("span",{className:(0,j.cn)("text-sm text-right text-black dark:text-white",s===t&&"text-black dark:text-lime-500 opacity-100"),children:e.text})]},t)})})},eK=e=>{let{loadingStates:t,loading:s,duration:a=1e4,loop:r=!1}=e,[n,o]=(0,i.useState)(0);return(0,i.useEffect)(()=>{if(!s){o(0);return}let e=setTimeout(()=>{o(e=>r?e===t.length-1?0:e+1:Math.min(e+1,t.length-1))},a);return()=>clearTimeout(e)},[n,s,r,t.length,a]),(0,l.jsx)(eO.M,{mode:"wait",children:s&&(0,l.jsx)(q.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:(0,j.cn)("fixed -bottom-56 right-0 z-[100] h-[80px] backdrop-blur-md"),children:(0,l.jsx)("div",{className:"h-96  relative",children:(0,l.jsx)(eB,{value:n,loadingStates:t})})})})},eF=[{text:"CheckpointLoaderSimple"},{text:"KSampler"}],e_=()=>{let[e,t]=(0,i.useState)(!1),[s,a]=(0,i.useState)(0),{onSubmit:r,queue:n,onDeleteFromQueue:o,promptError:d,onEdgesAnimate:c}=(0,u.q)((0,m.N)(e=>({onSubmit:e.onSubmit,queue:e.queue,onDeleteFromQueue:e.onDeleteFromQueue,promptError:e.promptError,onEdgesAnimate:e.onEdgesAnimate})));(0,i.useEffect)(()=>{void 0!==d&&eh.Am.error(d)},[d,s]),(0,i.useEffect)(()=>{c(n.length>0)},[n,c]);let f=(0,i.useCallback)(()=>{t(!0),r(),a(e=>e+1)},[r]);return n.length,(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(eK,{loadingStates:eF,loading:e}),(0,l.jsx)(D.z,{className:(0,j.cn)("relative h-12 w-12 rounded-3xl shadow-lg bg-gradient-to-b text-white dark:text-black dark:from-white dark:to-blue-50 ring-2 ring-blue-50 ring-opacity-60","from-slate-800 to-slate-700 ring-slate-400","hover:rounded-lg transition-all duration-200"),onClick:f,children:(0,l.jsx)(h.o1U,{})})]})};(a=r||(r={})).NODES="Nodes",a.WORKFLOW="Workflow",a.GALLERY="Gallery";var eq=i.memo(()=>{let[e,t]=(0,i.useState)("Nodes"),[s,a]=(0,i.useState)(!1),r=r=>{e===r?a(!s):(t(r),a(!0))},n=(0,i.useMemo)(()=>[{label:"Nodes",key:"Nodes",children:(0,l.jsx)(ee,{})},{label:"Workflow",key:"Workflow",children:(0,l.jsx)(ek,{})}],[]);return(0,l.jsxs)(S,{modal:!1,open:s,onOpenChange:a,children:[(0,l.jsxs)("div",{className:"fixed left-1/2 bottom-20 transform -translate-y-1/2 flex gap-3 m-2",children:[(0,l.jsx)(z,{asChild:!0,children:(0,l.jsx)(D.z,{onClick:()=>r("Nodes"),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,l.jsx)(h.pOD,{})})}),(0,l.jsx)(z,{asChild:!0,children:(0,l.jsx)(D.z,{onClick:()=>r("Workflow"),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,l.jsx)(h.otr,{})})}),(0,l.jsxs)(V,{children:[(0,l.jsx)(U,{asChild:!0,children:(0,l.jsx)(D.z,{className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,l.jsx)(_.Z,{strokeWidth:1.25})})}),(0,l.jsx)(K,{sideOffset:20,className:"rounded-2xl bg-zinc-800 dark:bg-background shadow-lg",children:(0,l.jsx)(eA,{})})]}),(0,l.jsx)(e_,{})]}),(0,l.jsx)(R,{side:"left",className:"overflow-y-scroll",children:(0,l.jsxs)(v,{value:e,onValueChange:e=>t(e),className:"mt-8",children:[(0,l.jsx)("div",{className:"px-2",children:(0,l.jsx)(b,{className:"w-full mb-4",children:n.map(e=>(0,l.jsx)(y,{className:"w-full",value:e.key,children:e.label},e.key))})}),n.map(e=>(0,l.jsx)(w,{value:e.key,children:e.children},e.key))]})})]})}),eI=s(5314),eT=s(8969),eY=s(6051),e$=s(4228),eG=s(1774),eH=s(9299);s(7333);var eP=e=>{let{strength:t=-1e3,distance:s=1e3}=e,a=(0,i.useMemo)(()=>({[eH.f]:eH.Z}),[]),{theme:r}=(0,eG.F)(),n=(0,i.useRef)(null),d=(0,i.useRef)(!0),{takeSnapshot:h}=c(),[f,x]=(0,i.useState)(null),{nodes:p,edges:g,onInit:j,onNodesChange:v,onEdgesChange:b,onConnect:y,onAddNode:w,onCopyNode:N,onPasteNode:k,onSetNodesGroup:C,onDeleteNode:S,onCreateGroup:z}=(0,u.q)((0,m.N)(e=>({nodes:e.nodes,edges:e.edges,onInit:e.onInit,onNodesChange:(0,e$.Z)(e.onNodesChange,1),onEdgesChange:(0,e$.Z)(e.onEdgesChange,1),onConnect:e.onConnect,onAddNode:e.onAddNode,onCopyNode:e.onCopyNode,onPasteNode:e.onPasteNode,onSetNodesGroup:e.onSetNodesGroup,onDeleteNode:e.onDeleteNode,onCreateGroup:e.onCreateGroup}))),E=(0,i.useCallback)(()=>{d.current=!1},[]),L=(0,i.useCallback)((e,t)=>{h(),d.current=!0,b([{id:e.id,type:"remove"}]),y(t)},[b,y,h]),M=(0,i.useCallback)((e,t)=>{d.current||b([{id:t.id,type:"remove"}]),d.current=!0},[b]),R=(0,i.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),D=(0,i.useCallback)(e=>{e.preventDefault();let t=JSON.parse(e.dataTransfer.getData("application/reactflow"));if(!t)return;let s=(0,I.yY)(e.clientX,e.clientY,n,f);h(),w({widget:t,position:s})},[f,w,h]),W=(0,i.useCallback)((e,t,s)=>{h(),s.length>2||"Group"!==t.data.name||f.getIntersectingNodes(t).filter(e=>"Group"!==e.data.name&&(e.parentNode===t.id||!e.parentNode)).map(e=>e.id)},[f,h]),Z=(0,i.useCallback)(()=>{let e=N();navigator.clipboard.writeText(JSON.stringify(e)),console.log("[Copy]",e)},[N]),A=(0,i.useCallback)(async()=>{try{let e=await navigator.clipboard.readText(),t=JSON.parse(e),s=(0,I.rf)(n,f);t&&k(t,s),console.log("[Paste]",t,s)}catch(e){console.log("[Paste]",e)}},[f,k]),O=(0,i.useCallback)(e=>{if(e.metaKey||e.ctrlKey&&!e.altKey){let t={KeyC:Z,KeyV:A,KeyG:z}[e.code];t&&t()}else("Delete"===e.code||"Backspace"===e.code)&&f.getNodes().forEach(e=>e.selected&&S(e.id))},[f,Z,A,z,S]);return(0,i.useEffect)(()=>(window.addEventListener("keydown",O),()=>{window.removeEventListener("keydown",O)}),[O]),(0,l.jsxs)(o.x$,{nodes:p,edges:g,nodeTypes:a,ref:n,fitView:!0,snapGrid:[20,20],minZoom:.05,multiSelectionKeyCode:["Shift"],deleteKeyCode:[],disableKeyboardA11y:!0,onNodesChange:v,onEdgesChange:b,onEdgeUpdate:L,onEdgeUpdateStart:E,onEdgeUpdateEnd:M,onConnect:y,onNodeDragStart:W,onDrop:D,onDragOver:R,onInit:e=>{x(e),j()},children:[(0,l.jsx)(eI.A,{variant:eI.T.Dots}),(0,l.jsx)(eT.Z,{showZoom:!1}),(0,l.jsx)(eY.a,{position:"bottom-left",nodeColor:e=>e.data.color||("dark"===r?"#2C3E50":"#ECF0F1"),style:{width:150,height:100}})]})},eJ=s(8792),eX=s(80);let eQ=i.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,l.jsxs)(eX.fC,{ref:t,className:(0,j.cn)("relative z-10 flex max-w-max flex-1 items-center justify-center",s),...r,children:[a,(0,l.jsx)(e5,{})]})});eQ.displayName=eX.fC.displayName;let e0=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(eX.aV,{ref:t,className:(0,j.cn)("flex flex-1 list-none items-center justify-center space-x-1",s),...a})});e0.displayName=eX.aV.displayName;let e1=eX.ck,e2=(0,k.j)("group inline-flex h-9 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-transparent focus:bg-transparent focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[active]:bg-transparent data-[state=open]:bg-transparent");i.forwardRef((e,t)=>{let{className:s,children:a,...r}=e;return(0,l.jsxs)(eX.xz,{ref:t,className:(0,j.cn)(e2(),"group",s),...r,children:[a," ",(0,l.jsx)(h.v4q,{className:"relative top-[1px] ml-2 h-3 w-3 transition group-data-[state=open]:rotate-180","aria-hidden":"true"})]})}).displayName=eX.xz.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(eX.VY,{ref:t,className:(0,j.cn)("left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto ",s),...a})}).displayName=eX.VY.displayName,eX.rU;let e5=i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)("div",{className:(0,j.cn)("absolute right-0 top-full flex justify-center"),children:(0,l.jsx)(eX.l_,{className:(0,j.cn)("origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]",s),ref:t,...a})})});function e4(){let{theme:e,setTheme:t}=(0,eG.F)();return(0,l.jsxs)(D.z,{variant:"ghost",size:"icon",onClick:()=>{"dark"===e?t("light"):t("dark")},children:[(0,l.jsx)(h.kLh,{className:"h-[1rem] w-[1rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),(0,l.jsx)(h.NWY,{className:"absolute h-[1rem] w-[1rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),(0,l.jsx)("span",{className:"sr-only",children:"Toggle theme"})]})}function e3(){let{theme:e}=(0,eG.F)();return(0,l.jsxs)(V,{children:[(0,l.jsx)(U,{asChild:!0,children:(0,l.jsx)(D.z,{variant:"ghost",size:"icon",className:"relative",children:(0,l.jsx)(h.AjK,{})})}),(0,l.jsx)(K,{className:"w-72 space-y-2 rounded-xl",align:"end",forceMount:!0,children:(0,l.jsxs)(B,{className:"space-y-1 py-2",children:[(0,l.jsx)(F,{asChild:!0,className:"text-muted-foreground cursor-pointer rounded-md py-2",children:(0,l.jsxs)(eJ.default,{href:"/",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-layout-dashboard w-5 h-5 mr-4",width:"44",height:"44",viewBox:"0 0 24 24",strokeWidth:"1.2",stroke:"dark"===e?"lightgray":"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M4 4h6v8h-6z"}),(0,l.jsx)("path",{d:"M4 16h6v4h-6z"}),(0,l.jsx)("path",{d:"M14 12h6v8h-6z"}),(0,l.jsx)("path",{d:"M14 4h6v4h-6z"})]}),"Explore"]})}),(0,l.jsx)(F,{asChild:!0,className:"text-muted-foreground cursor-pointer rounded-md py-2",children:(0,l.jsxs)(eJ.default,{href:"/",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-credit-card w-5 h-5 mr-4",width:"44",height:"44",viewBox:"0 0 24 24",strokeWidth:"1.2",stroke:"dark"===e?"lightgray":"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M3 5m0 3a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3z"}),(0,l.jsx)("path",{d:"M3 10l18 0"}),(0,l.jsx)("path",{d:"M7 15l.01 0"}),(0,l.jsx)("path",{d:"M11 15l2 0"})]}),"Subscription & Billing"]})}),(0,l.jsx)(F,{asChild:!0,className:"text-muted-foreground cursor-pointer rounded-md py-2",children:(0,l.jsxs)(eJ.default,{href:"https://git.new/civitui",target:"_blank",children:[(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"icon icon-tabler icon-tabler-brand-github w-5 h-5 mr-4",width:"44",height:"44",viewBox:"0 0 24 24",strokeWidth:"1.2",stroke:"dark"===e?"lightgray":"#2c3e50",fill:"none",strokeLinecap:"round",strokeLinejoin:"round",children:[(0,l.jsx)("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),(0,l.jsx)("path",{d:"M9 19c-4.3 1.4 -4.3 -2.5 -6 -3m12 5v-3.5c0 -1 .1 -1.4 -.5 -2c2.8 -.3 5.5 -1.4 5.5 -6a4.6 4.6 0 0 0 -1.3 -3.2a4.2 4.2 0 0 0 -.1 -3.2s-1.1 -.3 -3.5 1.3a12.3 12.3 0 0 0 -6.2 0c-2.4 -1.6 -3.5 -1.3 -3.5 -1.3a4.2 4.2 0 0 0 -.1 3.2a4.6 4.6 0 0 0 -1.3 3.2c0 4.6 2.7 5.7 5.5 6c-.6 .6 -.6 1.2 -.5 2v3.5"})]}),"Github"]})})]})})]})}function e6(){return(0,l.jsx)("div",{children:(0,l.jsxs)("div",{className:(0,j.cn)("fixed top-0 left-0 right-0 z-50 flex items-center justify-between p-6 lg:px-8 sm:flex-row h-14 backdrop-blur-md border-b border-b-slate-500 border-opacity-20 bg-transparent dark:text-white"),children:[(0,l.jsxs)(eJ.default,{href:"/",className:"text-lg font-semibold",children:["CivitUI",(0,l.jsx)("sup",{className:"text-blue-500 ml-1",children:"beta"})]}),(0,l.jsx)("div",{className:"ml-auto flex space-x-3 sm:justify items-center",children:(0,l.jsx)("div",{className:"space-x-5 md:flex",children:(0,l.jsx)("div",{children:(0,l.jsx)(eQ,{children:(0,l.jsxs)(e0,{className:"gap-4 items-center",children:[(0,l.jsx)(e1,{children:(0,l.jsx)(e4,{})}),(0,l.jsx)(e1,{children:(0,l.jsx)(e3,{})})]})})})})})]})})}function e9(){return(0,l.jsxs)("div",{className:"h-screen",children:[(0,l.jsx)(e6,{}),(0,l.jsx)(o.tV,{children:(0,l.jsx)(p,{children:(0,l.jsx)(eP,{})})}),(0,l.jsx)(eq,{})]})}e5.displayName=eX.l_.displayName,i.forwardRef((e,t)=>{let{className:s,...a}=e;return(0,l.jsx)(eX.z$,{ref:t,className:(0,j.cn)("top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in",s),...a,children:(0,l.jsx)("div",{className:"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md"})})}).displayName=eX.z$.displayName}},function(e){e.O(0,[310,780,273,75,14,971,69,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);