(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{4143:function(e,t,n){Promise.resolve().then(n.bind(n,4603))},4603:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return te}});var l,r,a=n(7437),o=n(2265),s=n(9655),i=n(970),c=n(202),d=n(5087),u=n(5849),h=n(1657);let m=e=>{let{category:t,items:n,setActiveItem:l,onAddNode:r,expandedItems:i,setExpandedItems:c}=e,d=(0,o.useCallback)((e,t)=>{e.dataTransfer.setData("application/reactflow",JSON.stringify(t)),e.dataTransfer.effectAllowed="move"},[]),x=e=>{l(n.widgets[e])},p=()=>{l(null)};return(0,a.jsxs)(s.qu,{children:[(0,a.jsx)(s.xx,{className:"text-xs text-left py-0 my-0 px-1 w-full",children:t}),(0,a.jsx)(s.dp,{className:"p-2",children:(0,a.jsxs)("div",{className:"flex flex-col items-baseline justify-start",children:[Object.entries(n.subcategories).map(e=>{let[t,n]=e;return(0,a.jsx)(m,{category:t,items:n,setActiveItem:l,onAddNode:r,expandedItems:i,setExpandedItems:c},t)}),Object.values(n.subcategories).length>0&&n.widgets.length>0&&(0,a.jsx)(s.uP,{}),n.widgets.map((e,t)=>(0,a.jsx)("button",{className:(0,h.cn)("cursor-click shadow-sm -mt-px w-full text-left","relative z-0 hover:z-50 px-1 py-0.7 rounded border border-neutral-600 transition duration-200 hover:border-white bg-background text-neutral-200 text-xs"),onClick:t=>{t.preventDefault(),r({widget:e})},draggable:!0,onDragStart:t=>d(t,e),onMouseEnter:()=>x(t),onMouseLeave:p,children:(0,u.Z)(e.name)},e.name))]})})]})};var x=o.memo(m),p=n(2177),f=o.memo(e=>{let{setActiveItem:t}=e,{widgets:n,onAddNode:l}=(0,i.q)((0,d.N)(e=>({widgets:e.widgets,onAddNode:e.onAddNode}))),[r,u]=(0,o.useState)({}),[h,m]=(0,o.useState)(""),[f,g]=(0,o.useState)([]);(0,o.useEffect)(()=>{let e={},t=(t,n)=>{let l=e;t.forEach((e,r)=>{l[e]||(l[e]={widgets:[],subcategories:{}}),r===t.length-1&&l[e].widgets.push(n),l=l[e].subcategories})},l=Object.values(n);for(let e of(h&&(l=l.filter(e=>e.name.toLowerCase().includes(h.toLowerCase()))),l))t(e.category.split("/"),e);u(e)},[n,h]);let v=(0,o.useCallback)(e=>{m(e.target.value)},[]);return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("div",{className:"flex px-2",children:(0,a.jsxs)("div",{className:"relative w-full",children:[(0,a.jsx)("input",{name:"search",type:"text",className:"px-9 flex h-6 w-full rounded-md border border-input bg-transparent text-sm shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",placeholder:"Search...",onChange:v,onKeyDown:e=>e.stopPropagation()}),(0,a.jsx)("div",{className:"absolute inset-y-0 left-0 pl-2   flex items-center   pointer-events-none",children:(0,a.jsx)(p._Ve,{className:"w-4 h-4 text-gray-400"})})]})}),(0,a.jsx)(s.uP,{}),(0,a.jsx)("div",{className:"flex flex-col",children:Object.entries(r).map((e,n)=>{let[r,o]=e;return(0,a.jsx)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.01*n,duration:.2},children:(0,a.jsx)(x,{category:r,items:o,setActiveItem:t,onAddNode:l,expandedItems:f,setExpandedItems:g},r)},r)})})]})}),g=n(7014),v=n(8325);let b=e=>{let{isRequired:t,position:n}=e;return(0,a.jsx)("div",{className:"mt-1.5 react-flow__handle ".concat(t?"bg-primary":"bg-border"," ").concat("left"===n?"mr-2":"ml-2"),style:{width:"12px",height:"12px",position:"absolute",[n]:-3}})};var w=o.memo(e=>{let{data:t}=e,{outputs:n,params:l,inputs:r}=(0,o.useMemo)(()=>{let e=t.output.map(e=>({name:e,type:e})),n=[],l=[];return Object.entries(t.input.required).forEach(e=>{let[t,r]=e;g.lj.isParameterOrList(r)?n.push({name:t,type:r[0],input:r}):l.push({name:t,type:r[0]})}),{outputs:e,params:n,inputs:l}},[t]);return(0,a.jsx)(c.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:300,damping:20,duration:.15},className:"w-[350px]",children:(0,a.jsxs)(v.Z,{title:t.name,active:!1,preview:!0,children:[(0,a.jsxs)("div",{className:"flex w-full items-stretch justify-between space-x-6",children:[(0,a.jsx)("div",{className:"flex-1",children:r.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(b,{position:"left",isRequired:1}),(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)})]},t))}),(0,a.jsx)("div",{className:"flex-1 text-right",children:n.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-end",children:[(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)}),(0,a.jsx)(b,{position:"right",isRequired:1})]},t))})]}),(0,a.jsx)("div",{className:"mt-4",children:l.map((e,t)=>(0,a.jsx)("div",{className:"flex items-center",children:(0,a.jsx)("span",{className:"text-sm",children:(0,u.Z)(e.name)})},t))})]})})});function y(e){let{children:t}=e,[n,l]=(0,o.useState)(null),[r,i]=(0,o.useState)({x:"right",y:"bottom"});return(0,o.useEffect)(()=>{let e=e=>{e.clientX>2*window.innerWidth/3?i({x:"left",y:"top"}):i({x:"right",y:"bottom"})};return window.addEventListener("mousemove",e),()=>{window.removeEventListener("mousemove",e)}},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(s.xV,{children:[(0,a.jsx)(s.W4,{children:t}),(0,a.jsx)(s.h_,{className:"overflow-scroll",children:(0,a.jsx)(f,{setActiveItem:l})})]}),null!==n&&(0,a.jsx)("div",{className:"fixed z-[60] ".concat(r.x,"-0 ").concat(r.y,"-0 bg-muted/50 p-8 rounded-lg border backdrop-blur-sm"),children:(0,a.jsx)(w,{data:n})})]})}var j=n(5400),C=n(2936),k=n(5754),N=n(2110),E=n(4991),S=n(1266),D=n(4104),_=n(1260),T=n(8687),z=n(2338),M=(n(7881),n(2642)),R=n(9586),L=n(9143),O=n(9310),A=n(1780);let[Z,I]=(0,D.b)("Tooltip",[z.D7]),P=(0,z.D7)(),V="tooltip.open",[$,F]=Z("TooltipProvider"),H="Tooltip",[W,K]=Z(H),q="TooltipTrigger",B=(0,o.forwardRef)((e,t)=>{let{__scopeTooltip:n,...l}=e,r=K(q,n),a=F(q,n),s=P(n),i=(0,o.useRef)(null),c=(0,S.e)(t,i,r.onTriggerChange),d=(0,o.useRef)(!1),u=(0,o.useRef)(!1),h=(0,o.useCallback)(()=>d.current=!1,[]);return(0,o.useEffect)(()=>()=>document.removeEventListener("pointerup",h),[h]),(0,o.createElement)(z.ee,(0,N.Z)({asChild:!0},s),(0,o.createElement)(R.WV.button,(0,N.Z)({"aria-describedby":r.open?r.contentId:void 0,"data-state":r.stateAttribute},l,{ref:c,onPointerMove:(0,E.M)(e.onPointerMove,e=>{"touch"===e.pointerType||u.current||a.isPointerInTransitRef.current||(r.onTriggerEnter(),u.current=!0)}),onPointerLeave:(0,E.M)(e.onPointerLeave,()=>{r.onTriggerLeave(),u.current=!1}),onPointerDown:(0,E.M)(e.onPointerDown,()=>{d.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:(0,E.M)(e.onFocus,()=>{d.current||r.onOpen()}),onBlur:(0,E.M)(e.onBlur,r.onClose),onClick:(0,E.M)(e.onClick,r.onClose)})))}),[G,U]=Z("TooltipPortal",{forceMount:void 0}),X="TooltipContent",Y=(0,o.forwardRef)((e,t)=>{let n=U(X,e.__scopeTooltip),{forceMount:l=n.forceMount,side:r="top",...a}=e,s=K(X,e.__scopeTooltip);return(0,o.createElement)(M.z,{present:l||s.open},s.disableHoverableContent?(0,o.createElement)(et,(0,N.Z)({side:r},a,{ref:t})):(0,o.createElement)(J,(0,N.Z)({side:r},a,{ref:t})))}),J=(0,o.forwardRef)((e,t)=>{let n=K(X,e.__scopeTooltip),l=F(X,e.__scopeTooltip),r=(0,o.useRef)(null),a=(0,S.e)(t,r),[s,i]=(0,o.useState)(null),{trigger:c,onClose:d}=n,u=r.current,{onPointerInTransitChange:h}=l,m=(0,o.useCallback)(()=>{i(null),h(!1)},[h]),x=(0,o.useCallback)((e,t)=>{let n=e.currentTarget,l={x:e.clientX,y:e.clientY},r=function(e,t){let n=Math.abs(t.top-e.y),l=Math.abs(t.bottom-e.y),r=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,l,r,a)){case a:return"left";case r:return"right";case n:return"top";case l:return"bottom";default:throw Error("unreachable")}}(l,n.getBoundingClientRect());i(function(e){let t=e.slice();return t.sort((e,t)=>e.x<t.x?-1:e.x>t.x?1:e.y<t.y?-1:e.y>t.y?1:0),function(e){if(e.length<=1)return e.slice();let t=[];for(let n=0;n<e.length;n++){let l=e[n];for(;t.length>=2;){let e=t[t.length-1],n=t[t.length-2];if((e.x-n.x)*(l.y-n.y)>=(e.y-n.y)*(l.x-n.x))t.pop();else break}t.push(l)}t.pop();let n=[];for(let t=e.length-1;t>=0;t--){let l=e[t];for(;n.length>=2;){let e=n[n.length-1],t=n[n.length-2];if((e.x-t.x)*(l.y-t.y)>=(e.y-t.y)*(l.x-t.x))n.pop();else break}n.push(l)}return(n.pop(),1===t.length&&1===n.length&&t[0].x===n[0].x&&t[0].y===n[0].y)?t:t.concat(n)}(t)}([...function(e,t,n=5){let l=[];switch(t){case"top":l.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":l.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":l.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":l.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n})}return l}(l,r),...function(e){let{top:t,right:n,bottom:l,left:r}=e;return[{x:r,y:t},{x:n,y:t},{x:n,y:l},{x:r,y:l}]}(t.getBoundingClientRect())])),h(!0)},[h]);return(0,o.useEffect)(()=>()=>m(),[m]),(0,o.useEffect)(()=>{if(c&&u){let e=e=>x(e,u),t=e=>x(e,c);return c.addEventListener("pointerleave",e),u.addEventListener("pointerleave",t),()=>{c.removeEventListener("pointerleave",e),u.removeEventListener("pointerleave",t)}}},[c,u,x,m]),(0,o.useEffect)(()=>{if(s){let e=e=>{let t=e.target,n={x:e.clientX,y:e.clientY},l=(null==c?void 0:c.contains(t))||(null==u?void 0:u.contains(t)),r=!function(e,t){let{x:n,y:l}=e,r=!1;for(let e=0,a=t.length-1;e<t.length;a=e++){let o=t[e].x,s=t[e].y,i=t[a].x,c=t[a].y;s>l!=c>l&&n<(i-o)*(l-s)/(c-s)+o&&(r=!r)}return r}(n,s);l?m():r&&(m(),d())};return document.addEventListener("pointermove",e),()=>document.removeEventListener("pointermove",e)}},[c,u,s,d,m]),(0,o.createElement)(et,(0,N.Z)({},e,{ref:a}))}),[Q,ee]=Z(H,{isInside:!1}),et=(0,o.forwardRef)((e,t)=>{let{__scopeTooltip:n,children:l,"aria-label":r,onEscapeKeyDown:a,onPointerDownOutside:s,...i}=e,c=K(X,n),d=P(n),{onClose:u}=c;return(0,o.useEffect)(()=>(document.addEventListener(V,u),()=>document.removeEventListener(V,u)),[u]),(0,o.useEffect)(()=>{if(c.trigger){let e=e=>{let t=e.target;null!=t&&t.contains(c.trigger)&&u()};return window.addEventListener("scroll",e,{capture:!0}),()=>window.removeEventListener("scroll",e,{capture:!0})}},[c.trigger,u]),(0,o.createElement)(_.XB,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:s,onFocusOutside:e=>e.preventDefault(),onDismiss:u},(0,o.createElement)(z.VY,(0,N.Z)({"data-state":c.stateAttribute},d,i,{ref:t,style:{...i.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"}}),(0,o.createElement)(L.A4,null,l),(0,o.createElement)(Q,{scope:n,isInside:!0},(0,o.createElement)(A.f,{id:c.contentId,role:"tooltip"},r||l))))}),en=e=>{let{__scopeTooltip:t,delayDuration:n=700,skipDelayDuration:l=300,disableHoverableContent:r=!1,children:a}=e,[s,i]=(0,o.useState)(!0),c=(0,o.useRef)(!1),d=(0,o.useRef)(0);return(0,o.useEffect)(()=>{let e=d.current;return()=>window.clearTimeout(e)},[]),(0,o.createElement)($,{scope:t,isOpenDelayed:s,delayDuration:n,onOpen:(0,o.useCallback)(()=>{window.clearTimeout(d.current),i(!1)},[]),onClose:(0,o.useCallback)(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>i(!0),l)},[l]),isPointerInTransitRef:c,onPointerInTransitChange:(0,o.useCallback)(e=>{c.current=e},[]),disableHoverableContent:r},a)},el=e=>{let{__scopeTooltip:t,children:n,open:l,defaultOpen:r=!1,onOpenChange:a,disableHoverableContent:s,delayDuration:i}=e,c=F(H,e.__scopeTooltip),d=P(t),[u,h]=(0,o.useState)(null),m=(0,T.M)(),x=(0,o.useRef)(0),p=null!=s?s:c.disableHoverableContent,f=null!=i?i:c.delayDuration,g=(0,o.useRef)(!1),[v=!1,b]=(0,O.T)({prop:l,defaultProp:r,onChange:e=>{e?(c.onOpen(),document.dispatchEvent(new CustomEvent(V))):c.onClose(),null==a||a(e)}}),w=(0,o.useMemo)(()=>v?g.current?"delayed-open":"instant-open":"closed",[v]),y=(0,o.useCallback)(()=>{window.clearTimeout(x.current),g.current=!1,b(!0)},[b]),j=(0,o.useCallback)(()=>{window.clearTimeout(x.current),b(!1)},[b]),C=(0,o.useCallback)(()=>{window.clearTimeout(x.current),x.current=window.setTimeout(()=>{g.current=!0,b(!0)},f)},[f,b]);return(0,o.useEffect)(()=>()=>window.clearTimeout(x.current),[]),(0,o.createElement)(z.fC,d,(0,o.createElement)(W,{scope:t,contentId:m,open:v,stateAttribute:w,trigger:u,onTriggerChange:h,onTriggerEnter:(0,o.useCallback)(()=>{c.isOpenDelayed?C():y()},[c.isOpenDelayed,C,y]),onTriggerLeave:(0,o.useCallback)(()=>{p?j():window.clearTimeout(x.current)},[j,p]),onOpen:y,onClose:j,disableHoverableContent:p},n))},er=o.forwardRef((e,t)=>{let{className:n,sideOffset:l=4,...r}=e;return(0,a.jsx)(Y,{ref:t,sideOffset:l,className:(0,h.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})});er.displayName=Y.displayName;var ea=n(9326),eo=n(5179);let es="horizontal",ei=["horizontal","vertical"],ec=(0,o.forwardRef)((e,t)=>{let{decorative:n,orientation:l=es,...r}=e,a=ed(l)?l:es;return(0,o.createElement)(R.WV.div,(0,N.Z)({"data-orientation":a},n?{role:"none"}:{"aria-orientation":"vertical"===a?a:void 0,role:"separator"},r,{ref:t}))});function ed(e){return ei.includes(e)}ec.propTypes={orientation(e,t,n){let l=e[t],r=String(l);return l&&!ed(l)?Error(`Invalid prop \`orientation\` of value \`${r}\` supplied to \`${n}\`, expected one of:
  - horizontal
  - vertical

Defaulting to \`${es}\`.`):null}};let eu=o.forwardRef((e,t)=>{let{className:n,orientation:l="horizontal",decorative:r=!0,...o}=e;return(0,a.jsx)(ec,{ref:t,decorative:r,orientation:l,className:(0,h.cn)("shrink-0 bg-border","horizontal"===l?"h-[1px] w-full":"h-full w-[1px]",n),...o})});eu.displayName=ec.displayName;var eh=o.memo(e=>{let{item:t,index:n,handleRename:l,handleUpdate:r,handleDelete:s,handleLoad:i}=e,[c,d]=(0,o.useState)(!1),u=(0,o.useCallback)(e=>{d(!1);let n=e.target.value;n&&l(t.id,n)},[l,t.id]),h=(0,o.useCallback)(()=>{i(t.graph,t.title)},[i,t.graph,t.title]),m=(0,o.useCallback)(()=>{d(!c)},[c]),x=(0,o.useCallback)(()=>{r(t.id,t.title)},[r,t.id,t.title]),f=(0,o.useCallback)(()=>{(0,g.Cq)(t.graph,t.title)},[t.graph,t.title]),v=(0,o.useCallback)(()=>{s(t.id,t.title)},[s,t.id,t.title]),b=(0,o.useCallback)(()=>c?(0,a.jsx)(eo.I,{defaultValue:t.title,onBlur:u,onKeyDown:e=>["Enter","Escape"].includes(e.key)&&e.target.blur()}):(0,a.jsx)("a",{className:"flex",title:"Load",onClick:h,children:t.title}),[c,t.title,n,u,h]);return(0,a.jsx)(en,{delayDuration:0,children:(0,a.jsx)("ul",{className:"list-none p-0 m-0",children:(0,a.jsx)("li",{className:"border-b border-gray-200 last:border-b-0",children:(0,a.jsxs)("div",{className:"flex flex-col justify-between",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("div",{children:(0,a.jsx)("a",{title:"Load",onClick:h,className:"flex items-center space-x-2 my-4",children:(0,a.jsx)("span",{children:b()})})}),(0,a.jsxs)("div",{className:"flex justify-end items-center",children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:m,children:(0,a.jsx)(p.SQj,{})})}),(0,a.jsx)(er,{children:"Rename workflow"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:x,children:(0,a.jsx)(p.oqE,{})})}),(0,a.jsx)(er,{children:"Overwrite with current"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:f,children:(0,a.jsx)(p._8t,{})})}),(0,a.jsx)(er,{children:"Download to disk"})]}),(0,a.jsx)(eu,{orientation:"vertical",decorative:!0}),(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:"bg-transparent text-white hover:bg-primary hover:text-black p-2 m-0",onClick:v,children:(0,a.jsx)(p.ypG,{})})}),(0,a.jsx)(er,{children:"Delete workflow"})]})]})]}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.S7f,{}),(0,a.jsx)("span",{children:Object.keys(t.graph.data).length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.qDj,{}),(0,a.jsx)("span",{children:t.graph.connections.length})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(p.T39,{}),(0,a.jsx)("span",{children:(()=>{let e=new Date(t.time);return e.getFullYear()+"-"+("0"+(e.getMonth()+1)).slice(-2)+"-"+("0"+e.getDate()).slice(-2)+" "+("0"+e.getHours()).slice(-2)+":"+("0"+e.getMinutes()).slice(-2)+":"+("0"+e.getSeconds()).slice(-2)})()})]})]})})]})},t.id)})})}),em=n(6288),ex=n(843);/**
 * @license lucide-react v0.352.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let ep=(0,ex.Z)("File",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}]]),ef=(0,ex.Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);function eg(e){let{onUpload:t}=e,[n,l]=(0,o.useState)(null),[r,s]=(0,o.useState)(""),{dragOver:i,setDragOver:c,onDragOver:d,onDragLeave:u}=function(){let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)("");return{dragOver:e,setDragOver:t,onDragOver:e=>{e.preventDefault(),t(!0)},onDragLeave:()=>t(!1),fileDropError:n,setFileDropError:l}}();return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"border-b",children:[(0,a.jsx)("label",{htmlFor:"file",onDragOver:d,onDragLeave:u,onDrop:e=>{e.preventDefault(),c(!1);let n=e.dataTransfer.files[0];return n?"application/json"!==n.type?s("Invalid file type! Only JSON files are accepted."):void(l(n),s(""),t(n)):s("No file selected.")},className:(0,h.cn)("px-4 py-2 border-[1.5px] border-dashed dark:border-neutral-700 m-4 rounded-lg flex flex-col justify-start items-center hover:cursor-pointer",i&&"border-blue-600 bg-blue-50"),children:(0,a.jsxs)("div",{className:"flex flex-col p-4 justify-start items-center text-center",children:[(0,a.jsx)(p.rG2,{className:(0,h.cn)("h-5 w-5 text-neutral-600 my-4",i&&"text-blue-500")}),(0,a.jsx)("p",{className:"font-semibold",children:"Load a workspace or drag & drop it here"}),(0,a.jsx)("p",{className:"text-neutral-500 text-sm",children:"Only JSON files."})]})}),(0,a.jsx)("input",{type:"file",name:"file",id:"file",className:"hidden",onChange:e=>{let n=e.target.files?e.target.files[0]:null;return n?"application/json"!==n.type?s("Invalid file type! Only JSON files are accepted."):void(l(n),s(""),t(n)):s("No file selected.")},accept:"application/json"})]}),n&&(0,a.jsx)("div",{className:"w-full px-4 py-2 gap-2 flex flex-col justify-start items-center border-t dark:border-neutral-700 overflow-auto",children:(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center border dark:border-neutral-700 rounded-lg px-2 py-1 w-full group",children:[(0,a.jsxs)("div",{className:"flex flex-row justify-start items-center gap-2",children:[(0,a.jsx)(ep,{className:"h-5 w-5 text-neutral-500"}),(0,a.jsx)(en,{children:(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)("p",{className:"truncate hover:cursor-help",children:n.name})}),(0,a.jsx)(er,{children:(0,a.jsx)("p",{children:n.name})})]})}),(0,a.jsx)("p",{className:"text-xs text-neutral-500",children:(0,h.t)(n.size)})]}),(0,a.jsx)("div",{className:"flex flex-row justify-end items-center gap-2",children:(0,a.jsx)("button",{className:"text-neutral-400 p-1 rounded-lg hover:text-black transition-all hover:cursor-pointer",onClick:()=>{l(null)},children:(0,a.jsx)(ef,{className:"h-4 w-4"})})})]})}),r&&(0,a.jsxs)("div",{className:"bg-orange-50 py-1 mx-2 rounded-lg text-center my-2 border border-orange-200 flex flex-row justify-center items-center gap-2",children:[(0,a.jsx)(ep,{className:"h-4 w-4 text-orange-400"}),(0,a.jsx)("p",{className:"text-orange-400 text-sm font-medium",children:r})]})]})}var ev=n(9842);let eb=o.memo(()=>{let[e,t]=(0,o.useState)(),[n,l]=(0,o.useState)(),[r,s]=(0,o.useState)(0),{onLoadWorkflow:c,onDownloadWorkflow:u,onSaveLocalWorkFlow:h,onUpdateLocalWorkFlowGraph:m,onUpdateLocalWorkFlowTitle:x}=(0,i.q)((0,d.N)(e=>({onLoadWorkflow:e.onLoadWorkflow,onDownloadWorkflow:e.onDownloadWorkflow,onSaveLocalWorkFlow:e.onSaveLocalWorkFlow,onUpdateLocalWorkFlowGraph:e.onUpdateLocalWorkFlowGraph,onUpdateLocalWorkFlowTitle:e.onUpdateLocalWorkFlowTitle}))),p=(0,o.useCallback)(()=>{h(e),s(r+1),em.Am.success("Success! ".concat(null!=e?e:"Your workflow"," have been saved."))},[r,h,e]),f=(0,o.useCallback)((e,t)=>{(0,g.Sf)(e),s(r+1),em.Am.info("".concat(t," has been deleted."))},[r]),v=(0,o.useCallback)((e,t)=>{e?(c(e),s(r+1),em.Am.success("Success! ".concat(t," have been loaded."))):em.Am.error("Error! Invalid workflow data.")},[r,c]),b=(0,o.useCallback)((e,t)=>{m(e),s(r+1),em.Am.success("Success! ".concat(t," have been update."))},[r,m]),w=(0,o.useCallback)((e,t)=>{x(e,t),s(r+1),em.Am.success("Success! the workflow have been renamed to ".concat(t," ."))},[r,x]);(0,o.useCallback)(()=>{(0,g.W)(),c(ea.Z),s(r+1),em.Am.success("Success! load default workflow.")},[r,c]);let y=(0,o.useCallback)(e=>{(0,g.Sk)(e,e=>{e?(c(e),em.Am.success("Success! the workflow have been loaded.")):em.Am.error("Error! Invalid workflow file.")})},[r,c]);return(0,o.useEffect)(()=>{try{let e=(0,g.qW)();Array.isArray(e)?l(e.sort((e,t)=>t.time-e.time)):console.error("Invalid local workflows data")}catch(e){console.error("Error retrieving local workflows:",e)}},[r]),(0,o.useCallback)((e,t)=>(0,a.jsx)(eh,{item:e,index:t,handleLoad:v,handleUpdate:b,handleDelete:f,handleRename:w}),[f,v,w,b]),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)(k.z,{className:"bg-border hover:bg-black text-white mt-3 mx-5",onClick:p,children:"Save"}),(0,a.jsx)(eg,{onUpload:y}),(0,a.jsxs)("div",{children:[(0,a.jsx)(ev._,{children:"Local Workflows"}),null==n?void 0:n.map((e,t)=>(0,a.jsx)("li",{className:"border-b border-gray-200 last:border-b-0 list-none",children:(0,a.jsx)(eh,{item:e,index:t,handleLoad:v,handleUpdate:b,handleDelete:f,handleRename:w})},e.id))]})]})}),ew=e=>{let{setOpen:t}=e;return(0,a.jsxs)(C.PK,{children:[(0,a.jsx)(C.t9,{asChild:!0}),(0,a.jsx)(C.cZ,{className:"fixed inset-0 z-50 flex flex-col items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-black p-6 rounded-lg shadow-lg",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold",children:"Are you sure?"}),(0,a.jsx)(C.Be,{className:"text-sm",children:"This action will clear the graph. Do you want to proceed?"}),(0,a.jsxs)("div",{className:"mt-4 flex justify-end space-x-2",children:[(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!1),variant:"outline",children:"Cancel"})}),(0,a.jsx)(k.z,{onClick:()=>{t(!1)},children:"Confirm"})]})]})})]})};var ey=n(5509),ej=n(2558);let eC=e=>{let{open:t,setOpen:n}=e,{onUpdateFrontend:l,edgeType:r,onEdgesType:o}=(0,i.q)((0,d.N)(e=>({onUpdateFrontend:e.onUpdateFrontend,edgeType:e.edgeType,onEdgesType:e.onEdgesType}))),s=[{label:"Client Frontend",item:e=>(0,a.jsxs)(ey.Ph,{onValueChange:async()=>l(),children:[(0,a.jsx)(ey.i4,{className:"w-32",children:(0,a.jsx)(ey.ki,{placeholder:"sabre"})}),(0,a.jsx)(ey.Bw,{children:e.map(e=>(0,a.jsx)(ey.Ql,{value:e,children:e},e))})]}),options:["classic","sabre"]},{label:"Edge Type",item:e=>(0,a.jsxs)(ey.Ph,{value:r.name,onValueChange:e=>o(ej.v.find(t=>t.name===e)),children:[(0,a.jsx)(ey.i4,{className:"w-32",children:(0,a.jsx)(ey.ki,{placeholder:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[r.icon,(0,u.Z)(r.name)]})})}),(0,a.jsx)(ey.Bw,{className:"w-full",children:e.map(e=>(0,a.jsx)(ey.Ql,{className:"w-full",value:e.name,children:(0,a.jsxs)("div",{className:"flex flex-row justify-start gap-2 items-center w-full",children:[e.icon,(0,u.Z)(e.name)]})},e.name))})]}),options:ej.v}];return(0,a.jsx)(C.PK,{children:(0,a.jsx)(C.cZ,{className:"absolute inset-0 w-96 h-52 p-4 mx-auto my-auto bg-black rounded-[12px]",children:(0,a.jsxs)("div",{className:"w-full h-full bg-black p-1 shadow-lg relative",children:[(0,a.jsx)(C.$N,{className:"text-lg font-bold mt-0.5 mr-10",children:"Settings"}),(0,a.jsx)(C.GG,{asChild:!0,children:(0,a.jsx)(k.z,{className:"absolute top-0 right-2 p-1 bg-transparent hover:bg-transparent border-none shadow-none",onClick:()=>n(!1),variant:"outline",children:(0,a.jsx)(p.Pxu,{})})}),(0,a.jsx)("div",{className:"flex flex-col gap-2 mt-4",children:s.map(e=>(0,a.jsxs)("div",{className:"flex flex-row justify-between items-center gap-1",children:[(0,a.jsx)("label",{className:"text-sm font-semibold",children:e.label}),e.item(e.options)]},e.label))})]})})})},ek=e=>{let{content:t,children:n}=e;return(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:n}),(0,a.jsx)(er,{side:"left",className:"text-xs",children:t})]})},eN=()=>{let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(0),{onSubmit:r,queue:s,onDeleteFromQueue:c,promptError:u,onEdgesAnimate:m,expanded:x,onExpand:f}=(0,i.q)((0,d.N)(e=>({onSubmit:e.onSubmit,queue:e.queue,onDeleteFromQueue:e.onDeleteFromQueue,promptError:e.promptError,onEdgesAnimate:e.onEdgesAnimate,onExpand:e.onExpand,expanded:e.expanded})));(0,o.useEffect)(()=>{void 0!==u&&em.Am.error(u)},[u,n]),(0,o.useEffect)(()=>{m(s.length>0)},[s,m]);let g=(0,o.useCallback)(()=>{t(!0),r(),l(e=>e+1)},[r]);return s.length,(0,a.jsxs)(el,{children:[(0,a.jsx)(B,{asChild:!0,children:(0,a.jsx)(k.z,{className:(0,h.cn)("relative h-12 w-12 rounded-3xl shadow-lg bg-gradient-to-b text-white dark:text-black dark:from-white dark:to-blue-50 ring-2 ring-blue-50 ring-opacity-60","from-slate-800 to-slate-700 ring-slate-400","hover:rounded-lg transition-all duration-200"),onClick:g,children:(0,a.jsx)(p.o1U,{})})}),(0,a.jsx)(er,{side:"left",className:"text-xs bg-white text-black",children:"Queue prompt"})]})};var eE=o.memo(()=>{let[e,t]=(0,o.useState)(!1),[n,l]=(0,o.useState)(!1),[r,s]=(0,o.useState)(!1),[c,d]=(0,o.useState)(!1),{expanded:u,onExpand:h}=(0,i.q)(e=>({expanded:e.expanded,onExpand:e.onExpand})),m=()=>{l(!n),h()};return(0,a.jsx)(en,{delayDuration:0,children:(0,a.jsxs)("div",{className:"fixed right-4 top-4 flex flex-col gap-3 m-2",children:[(0,a.jsx)(eN,{}),(0,a.jsxs)(j.yo,{modal:!0,open:e,onOpenChange:t,children:[(0,a.jsx)(ek,{content:"Save/load workflows",children:(0,a.jsx)(j.aM,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>t(!e),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.otr,{})})})}),(0,a.jsx)(j.ue,{side:"left",className:"overflow-y-scroll",children:(0,a.jsx)(eb,{})})]}),(0,a.jsx)(ek,{content:"Recalculate node positions",children:(0,a.jsx)(k.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.tPC,{})})}),(0,a.jsx)(ek,{content:"Toggle parameter dropdowns",children:(0,a.jsx)(k.z,{onClick:()=>m(),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:n?(0,a.jsx)(p.hNW,{}):(0,a.jsx)(p.RgI,{})})}),(0,a.jsxs)(C.Vq,{open:r,onOpenChange:s,children:[(0,a.jsx)(ek,{content:"Clear graph",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>s(!0),className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.XHJ,{})})})}),(0,a.jsx)(ew,{setOpen:s})]}),(0,a.jsxs)(C.Vq,{open:c,onOpenChange:d,children:[(0,a.jsx)(ek,{content:"Settings",children:(0,a.jsx)(C.hg,{asChild:!0,children:(0,a.jsx)(k.z,{onClick:()=>{},className:"relative rounded-3xl shadow-lg hover:bg-background hover:rounded-lg transition-all duration-200 h-12 w-12",variant:"outline",children:(0,a.jsx)(p.UG6,{})})})}),(0,a.jsx)(eC,{open:c,setOpen:d})]})]})})}),eS=n(3606),eD=n(1105),e_=n(2628);function eT({color:e,dimensions:t,lineWidth:n}){return o.createElement("path",{stroke:e,strokeWidth:n,d:`M${t[0]/2} 0 V${t[1]} M0 ${t[1]/2} H${t[0]}`})}function ez({color:e,radius:t}){return o.createElement("circle",{cx:t,cy:t,r:t,fill:e})}(l=r||(r={})).Lines="lines",l.Dots="dots",l.Cross="cross";let eM={[r.Dots]:"#91919a",[r.Lines]:"#eee",[r.Cross]:"#e2e2e2"},eR={[r.Dots]:1,[r.Lines]:1,[r.Cross]:6},eL=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function eO({id:e,variant:t=r.Dots,gap:n=20,size:l,lineWidth:a=1,offset:s=2,color:i,style:c,className:d}){let u=(0,o.useRef)(null),{transform:h,patternId:m}=(0,eS.oR)(eL,e_.X),x=i||eM[t],p=l||eR[t],f=t===r.Dots,g=t===r.Cross,v=Array.isArray(n)?n:[n,n],b=[v[0]*h[2]||1,v[1]*h[2]||1],w=p*h[2],y=g?[w,w]:b,j=f?[w/s,w/s]:[y[0]/s,y[1]/s];return o.createElement("svg",{className:(0,eD.Z)(["react-flow__background",d]),style:{...c,position:"absolute",width:"100%",height:"100%",top:0,left:0},ref:u,"data-testid":"rf__background"},o.createElement("pattern",{id:m+e,x:h[0]%b[0],y:h[1]%b[1],width:b[0],height:b[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${j[0]},-${j[1]})`},f?o.createElement(ez,{color:x,radius:w/s}):o.createElement(eT,{dimensions:y,color:x,lineWidth:a})),o.createElement("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${m+e})`}))}eO.displayName="Background";var eA=(0,o.memo)(eO);function eZ(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},o.createElement("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"}))}function eI(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5"},o.createElement("path",{d:"M0 0h32v4.2H0z"}))}function eP(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30"},o.createElement("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"}))}function eV(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"}))}function e$(){return o.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32"},o.createElement("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"}))}let eF=({children:e,className:t,...n})=>o.createElement("button",{type:"button",className:(0,eD.Z)(["react-flow__controls-button",t]),...n},e);eF.displayName="ControlButton";let eH=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom}),eW=({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:l=!0,fitViewOptions:r,onZoomIn:a,onZoomOut:s,onFitView:i,onInteractiveChange:c,className:d,children:u,position:h="bottom-left"})=>{let m=(0,eS.AC)(),[x,p]=(0,o.useState)(!1),{isInteractive:f,minZoomReached:g,maxZoomReached:v}=(0,eS.oR)(eH,e_.X),{zoomIn:b,zoomOut:w,fitView:y}=(0,eS._K)();return((0,o.useEffect)(()=>{p(!0)},[]),x)?o.createElement(eS.s_,{className:(0,eD.Z)(["react-flow__controls",d]),position:h,style:e,"data-testid":"rf__controls"},t&&o.createElement(o.Fragment,null,o.createElement(eF,{onClick:()=>{b(),a?.()},className:"react-flow__controls-zoomin",title:"zoom in","aria-label":"zoom in",disabled:v},o.createElement(eZ,null)),o.createElement(eF,{onClick:()=>{w(),s?.()},className:"react-flow__controls-zoomout",title:"zoom out","aria-label":"zoom out",disabled:g},o.createElement(eI,null))),n&&o.createElement(eF,{className:"react-flow__controls-fitview",onClick:()=>{y(r),i?.()},title:"fit view","aria-label":"fit view"},o.createElement(eP,null)),l&&o.createElement(eF,{className:"react-flow__controls-interactive",onClick:()=>{m.setState({nodesDraggable:!f,nodesConnectable:!f,elementsSelectable:!f}),c?.(!f)},title:"toggle interactivity","aria-label":"toggle interactivity"},f?o.createElement(e$,null):o.createElement(eV,null)),u):null};eW.displayName="Controls";var eK=(0,o.memo)(eW),eq=n(653),eB=n(6369),eG=n(3423);let eU=({id:e,x:t,y:n,width:l,height:r,style:a,color:s,strokeColor:i,strokeWidth:c,className:d,borderRadius:u,shapeRendering:h,onClick:m,selected:x})=>{let{background:p,backgroundColor:f}=a||{};return o.createElement("rect",{className:(0,eD.Z)(["react-flow__minimap-node",{selected:x},d]),x:t,y:n,rx:u,ry:u,width:l,height:r,fill:s||p||f,stroke:i,strokeWidth:c,shapeRendering:h,onClick:m?t=>m(t,e):void 0})};eU.displayName="MiniMapNode";var eX=(0,o.memo)(eU);let eY=e=>e.nodeOrigin,eJ=e=>e.getNodes().filter(e=>!e.hidden&&e.width&&e.height),eQ=e=>e instanceof Function?e:()=>e;var e0=(0,o.memo)(function({nodeStrokeColor:e="transparent",nodeColor:t="#e2e2e2",nodeClassName:n="",nodeBorderRadius:l=5,nodeStrokeWidth:r=2,nodeComponent:a=eX,onClick:s}){let i=(0,eS.oR)(eJ,e_.X),c=(0,eS.oR)(eY),d=eQ(t),u=eQ(e),h=eQ(n),m="undefined"==typeof window||window.chrome?"crispEdges":"geometricPrecision";return o.createElement(o.Fragment,null,i.map(e=>{let{x:t,y:n}=(0,eS.VP)(e,c).positionAbsolute;return o.createElement(a,{key:e.id,x:t,y:n,width:e.width,height:e.height,style:e.style,selected:e.selected,className:h(e),color:d(e),borderRadius:l,strokeColor:u(e),strokeWidth:r,shapeRendering:m,onClick:s,id:e.id})}))});let e1=e=>{let t=e.getNodes(),n={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:n,boundingRect:t.length>0?(0,eS.oI)((0,eS.RX)(t,e.nodeOrigin),n):n,rfId:e.rfId}};function e2({style:e,className:t,nodeStrokeColor:n="transparent",nodeColor:l="#e2e2e2",nodeClassName:r="",nodeBorderRadius:a=5,nodeStrokeWidth:s=2,nodeComponent:i,maskColor:c="rgb(240, 240, 240, 0.6)",maskStrokeColor:d="none",maskStrokeWidth:u=1,position:h="bottom-right",onClick:m,onNodeClick:x,pannable:p=!1,zoomable:f=!1,ariaLabel:g="React Flow mini map",inversePan:v=!1,zoomStep:b=10,offsetScale:w=5}){let y=(0,eS.AC)(),j=(0,o.useRef)(null),{boundingRect:C,viewBB:k,rfId:N}=(0,eS.oR)(e1,e_.X),E=e?.width??200,S=e?.height??150,D=Math.max(C.width/E,C.height/S),_=D*E,T=D*S,z=w*D,M=C.x-(_-C.width)/2-z,R=C.y-(T-C.height)/2-z,L=_+2*z,O=T+2*z,A=`react-flow__minimap-desc-${N}`,Z=(0,o.useRef)(0);Z.current=D,(0,o.useEffect)(()=>{if(j.current){let e=(0,eB.Z)(j.current),t=(0,eq.sP)().on("zoom",p?e=>{let{transform:t,d3Selection:n,d3Zoom:l,translateExtent:r,width:a,height:o}=y.getState();if("mousemove"!==e.sourceEvent.type||!n||!l)return;let s=Z.current*Math.max(1,t[2])*(v?-1:1),i={x:t[0]-e.sourceEvent.movementX*s,y:t[1]-e.sourceEvent.movementY*s},c=eq.CR.translate(i.x,i.y).scale(t[2]),d=l.constrain()(c,[[0,0],[a,o]],r);l.transform(n,d)}:null).on("zoom.wheel",f?e=>{let{transform:t,d3Selection:n,d3Zoom:l}=y.getState();if("wheel"!==e.sourceEvent.type||!n||!l)return;let r=-e.sourceEvent.deltaY*(1===e.sourceEvent.deltaMode?.05:e.sourceEvent.deltaMode?1:.002)*b,a=t[2]*Math.pow(2,r);l.scaleTo(n,a)}:null);return e.call(t),()=>{e.on("zoom",null)}}},[p,f,v,b]);let I=m?e=>{let t=(0,eG.Z)(e);m(e,{x:t[0],y:t[1]})}:void 0;return o.createElement(eS.s_,{position:h,style:e,className:(0,eD.Z)(["react-flow__minimap",t]),"data-testid":"rf__minimap"},o.createElement("svg",{width:E,height:S,viewBox:`${M} ${R} ${L} ${O}`,role:"img","aria-labelledby":A,ref:j,onClick:I},g&&o.createElement("title",{id:A},g),o.createElement(e0,{onClick:x?(e,t)=>{x(e,y.getState().nodeInternals.get(t))}:void 0,nodeColor:l,nodeStrokeColor:n,nodeBorderRadius:a,nodeClassName:r,nodeStrokeWidth:s,nodeComponent:i}),o.createElement("path",{className:"react-flow__minimap-mask",d:`M${M-z},${R-z}h${L+2*z}v${O+2*z}h${-L-2*z}z
        M${k.x},${k.y}h${k.width}v${k.height}h${-k.width}z`,fill:c,fillRule:"evenodd",stroke:d,strokeWidth:u,pointerEvents:"none"})))}e2.displayName="MiniMap";var e3=(0,o.memo)(e2),e4=n(4228),e5=n(1774),e6=n(6042);let e7={maxHistorySize:100,enableShortcuts:!0};var e8=function(){let{maxHistorySize:e=e7.maxHistorySize,enableShortcuts:t=e7.enableShortcuts}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e7,[n,l]=(0,o.useState)([]),[r,a]=(0,o.useState)([]),{setNodes:s,setEdges:i,getNodes:c,getEdges:d}=(0,eS._K)(),u=(0,o.useCallback)(()=>{l(t=>[...t.slice(t.length-e+1,t.length),{nodes:c(),edges:d()}]),a([])},[c,d,e]),h=(0,o.useCallback)(()=>{let e=n[n.length-1];e&&(l(e=>e.slice(0,e.length-1)),a(e=>[...e,{nodes:c(),edges:d()}]),s(e.nodes),i(e.edges))},[s,i,c,d,n]),m=(0,o.useCallback)(()=>{let e=r[r.length-1];e&&(a(e=>e.slice(0,e.length-1)),l(e=>[...e,{nodes:c(),edges:d()}]),s(e.nodes),i(e.edges))},[s,i,c,d,r]);return(0,o.useEffect)(()=>{if(!t)return;let e=e=>{"z"===e.key&&(e.ctrlKey||e.metaKey)&&e.shiftKey?(m(),e.preventDefault()):"z"===e.key&&(e.ctrlKey||e.metaKey)&&(h(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[h,m,t]),{undo:h,redo:m,takeSnapshot:u,canUndo:!n.length,canRedo:!r.length}};n(7333);var e9=e=>{let{strength:t=-1e3,distance:n=1e3}=e,l=(0,o.useMemo)(()=>({[e6.f]:e6.Z}),[]),{theme:s}=(0,e5.F)(),c=(0,o.useRef)(null),u=(0,o.useRef)(!0),{takeSnapshot:h}=e8(),[m,x]=(0,o.useState)(null),{nodes:p,edges:f,onInit:v,onNodesChange:b,onEdgesChange:w,onConnect:y,onAddNode:j,onCopyNode:C,onPasteNode:k,onSetNodesGroup:N,onDeleteNode:E,onCreateGroup:S}=(0,i.q)((0,d.N)(e=>({nodes:e.nodes,edges:e.edges,onInit:e.onInit,onNodesChange:(0,e4.Z)(e.onNodesChange,1),onEdgesChange:(0,e4.Z)(e.onEdgesChange,1),onConnect:e.onConnect,onAddNode:e.onAddNode,onCopyNode:e.onCopyNode,onPasteNode:e.onPasteNode,onSetNodesGroup:e.onSetNodesGroup,onDeleteNode:e.onDeleteNode,onCreateGroup:e.onCreateGroup}))),D=(0,o.useCallback)(()=>{u.current=!1},[]),_=(0,o.useCallback)((e,t)=>{h(),u.current=!0,w([{id:e.id,type:"remove"}]),y(t)},[w,y,h]),T=(0,o.useCallback)((e,t)=>{u.current||w([{id:t.id,type:"remove"}]),u.current=!0},[w]),z=(0,o.useCallback)(e=>{e.preventDefault(),e.dataTransfer.dropEffect="move"},[]),M=(0,o.useCallback)(e=>{e.preventDefault();let t=JSON.parse(e.dataTransfer.getData("application/reactflow"));if(!t)return;let n=(0,g.yY)(e.clientX,e.clientY,c,m);h(),j({widget:t,position:n})},[m,j,h]),R=(0,o.useCallback)((e,t,n)=>{h(),n.length>2||"Group"!==t.data.name||m.getIntersectingNodes(t).filter(e=>"Group"!==e.data.name&&(e.parentNode===t.id||!e.parentNode)).map(e=>e.id)},[m,h]),L=(0,o.useCallback)(()=>{let e=C();navigator.clipboard.writeText(JSON.stringify(e)),console.log("[Copy]",e)},[C]),O=(0,o.useCallback)(async()=>{try{let e=await navigator.clipboard.readText(),t=JSON.parse(e),n=(0,g.rf)(c,m);t&&k(t,n),console.log("[Paste]",t,n)}catch(e){console.log("[Paste]",e)}},[m,k]),A=(0,o.useCallback)(e=>{if(e.metaKey||e.ctrlKey&&!e.altKey){let t={KeyC:L,KeyV:O,KeyG:S}[e.code];t&&t()}else("Delete"===e.code||"Backspace"===e.code)&&m.getNodes().forEach(e=>e.selected&&E(e.id))},[m,L,O,S,E]);return(0,o.useEffect)(()=>(window.addEventListener("keydown",A),()=>{window.removeEventListener("keydown",A)}),[A]),(0,a.jsxs)(eS.x$,{nodes:p,edges:f,nodeTypes:l,ref:c,fitView:!0,snapGrid:[20,20],minZoom:.05,multiSelectionKeyCode:["Shift"],deleteKeyCode:[],disableKeyboardA11y:!0,onNodesChange:b,onEdgesChange:w,onEdgeUpdate:_,onEdgeUpdateStart:D,onEdgeUpdateEnd:T,onConnect:y,onNodeDragStart:R,onDrop:M,onDragOver:z,onInit:e=>{x(e),v()},children:[(0,a.jsx)(eA,{variant:r.Dots}),(0,a.jsx)(eK,{showZoom:!1}),(0,a.jsx)(e3,{position:"bottom-left",nodeColor:e=>e.data.color||("light"===s?"#ECF0F1":"#2C3E50"),style:{width:150,height:100}})]})};function te(){return(0,a.jsxs)("div",{className:"h-screen",children:[(0,a.jsx)(eS.tV,{children:(0,a.jsx)(y,{children:(0,a.jsx)(e9,{})})}),(0,a.jsx)(eE,{})]})}},7333:function(){}},function(e){e.O(0,[310,780,387,14,971,69,744],function(){return e(e.s=4143)}),_N_E=e.O()}]);